{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pedro%20Henrique/Desktop/A-firma/website-ui/lib/story/cases.ts"],"sourcesContent":["export type SourceLevel = \"A\" | \"B\" | \"C\";\n\nexport type CaseSource = {\n  title: string;\n  url: string;\n  level: SourceLevel;\n  type: \"primary\" | \"secondary\";\n};\n\nexport type StoryCase = {\n  id: string;\n  domain: \"finance\" | \"macro\" | \"realestate\";\n  title: string;\n  period: string;\n  why_matters: string;\n  what_happened: string;\n  motor_reading: string;\n  operational_use: string;\n  risk_limit: string;\n  image_hint: string;\n  sources: CaseSource[];\n};\n\nexport const STORY_CASES: StoryCase[] = [\n  {\n    id: \"yen-carry-2024\",\n    domain: \"finance\",\n    title: \"Yen carry unwind e explosao de volatilidade\",\n    period: \"2024-08\",\n    why_matters:\n      \"Liquidez some rapido em estruturas alavancadas. O risco principal nao e direcao de preco, e regime de fragilidade.\",\n    what_happened:\n      \"A compressao de diferencial de juros entre EUA e Japao forca desalavancagem. O VIX salta e a estrutura de opcao perde estabilidade.\",\n    motor_reading:\n      \"O motor trata como transicao de regime com queda de confianca local, aumento de instabilidade e elevacao de alertas.\",\n    operational_use:\n      \"Uso pratico: reduzir exposicao bruta, bloquear novos riscos e acionar hedge condicional por regime.\",\n    risk_limit:\n      \"Nao e previsao de candle. E radar de contexto para controle de risco e de alavancagem.\",\n    image_hint: \"Mesa de risco, tela de volatilidade e fluxo de opcao em stress.\",\n    sources: [\n      {\n        title: \"BIS - Anatomy of the VIX spike in August 2024\",\n        url: \"https://www.bis.org/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"Euronext - Market quality and volatility shock\",\n        url: \"https://www.euronext.com/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"Wellington - Yen carry unwind\",\n        url: \"https://www.wellington.com/\",\n        level: \"B\",\n        type: \"secondary\",\n      },\n    ],\n  },\n  {\n    id: \"tariff-shock-2025\",\n    domain: \"macro\",\n    title: \"Choque tarifario e quebra de regime de comercio\",\n    period: \"2025-04\",\n    why_matters:\n      \"Mudanca regulatoria abrupta desloca o equilibrio macro e contamina equities, FX e cadeia global.\",\n    what_happened:\n      \"Tarifas amplas elevam incerteza de custo, comprimem margem e aumentam dispersao setorial em poucos dias.\",\n    motor_reading:\n      \"Regime sai de estabilidade para transicao/instavel com persistencia maior de alertas e menor qualidade de sinal.\",\n    operational_use:\n      \"Uso pratico: mover para postura defensiva por dominio, limitar risco direcional e priorizar setores resilientes.\",\n    risk_limit:\n      \"Motor nao explica geopolitica; ele mede efeito no estado do sistema.\",\n    image_hint: \"Portos, containers e curva de volatilidade em tela unica.\",\n    sources: [\n      {\n        title: \"IMF - Red Sea attacks and global trade disruption\",\n        url: \"https://www.imf.org/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"Congress - Economic effects and fiscal stress\",\n        url: \"https://www.congress.gov/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"McKinsey - Supply chain risk pulse 2025\",\n        url: \"https://www.mckinsey.com/\",\n        level: \"B\",\n        type: \"secondary\",\n      },\n    ],\n  },\n  {\n    id: \"cre-maturity-wall\",\n    domain: \"realestate\",\n    title: \"Maturity wall no real estate comercial\",\n    period: \"2025-2026\",\n    why_matters:\n      \"Crise lenta de refinanciamento causa erosao de capital sem crash unico visivel.\",\n    what_happened:\n      \"Vencimento de divida em ambiente de juros altos gera bifurcacao de credito e queda de liquidez de ativos.\",\n    motor_reading:\n      \"Sinais de transicao longa com qualidade heterogenea entre regioes e maior tempo em estado de cautela.\",\n    operational_use:\n      \"Uso pratico: congelar alocacao agressiva, revisar duration e exigir evidencia adicional antes de expandir risco.\",\n    risk_limit:\n      \"Motor identifica fragilidade de regime; nao substitui due diligence de ativo individual.\",\n    image_hint: \"Skyline corporativo com vacancia e curva de credito em stress.\",\n    sources: [\n      {\n        title: \"Congress - Commercial Real Estate and the Banking Sector\",\n        url: \"https://www.congress.gov/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"MBA - Commercial/Multifamily Research\",\n        url: \"https://www.mba.org/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"NAIOP - Challenges facing CRE in 2025\",\n        url: \"https://www.naiop.org/\",\n        level: \"B\",\n        type: \"secondary\",\n      },\n    ],\n  },\n];\n\nexport const DOMAIN_LABELS: Record<StoryCase[\"domain\"], string> = {\n  finance: \"Finance / Trading\",\n  macro: \"Macro / Operacoes\",\n  realestate: \"Imobiliario\",\n};\r\n"],"names":[],"mappings":";;;;;;AAuBO,MAAM,cAA2B;IACtC;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,QAAQ;QACR,aACE;QACF,eACE;QACF,eACE;QACF,iBACE;QACF,YACE;QACF,YAAY;QACZ,SAAS;YACP;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;YACA;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;YACA;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;SACD;IACH;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,QAAQ;QACR,aACE;QACF,eACE;QACF,eACE;QACF,iBACE;QACF,YACE;QACF,YAAY;QACZ,SAAS;YACP;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;YACA;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;YACA;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;SACD;IACH;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,QAAQ;QACR,aACE;QACF,eACE;QACF,eACE;QACF,iBACE;QACF,YACE;QACF,YAAY;QACZ,SAAS;YACP;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;YACA;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;YACA;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,MAAM;YACR;SACD;IACH;CACD;AAEM,MAAM,gBAAqD;IAChE,SAAS;IACT,OAAO;IACP,YAAY;AACd"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pedro%20Henrique/Desktop/A-firma/website-ui/lib/server/validated.ts"],"sourcesContent":["import { promises as fs } from \"fs\";\nimport path from \"path\";\n\nfunction repoRoot() {\n  return path.resolve(process.cwd(), \"..\");\n}\n\nexport function validatedRoot() {\n  return process.env.VALIDATED_DIR || path.join(repoRoot(), \"results\", \"validated\", \"latest\");\n}\n\nexport async function readValidatedUniverse(tf: string) {\n  const file = path.join(validatedRoot(), `universe_${tf}.json`);\n  const text = await fs.readFile(file, \"utf-8\");\n  return JSON.parse(text);\n}\n\nexport async function readAssetStatusMap() {\n  const file = path.join(validatedRoot(), \"asset_status.csv\");\n  const text = await fs.readFile(file, \"utf-8\");\n  const lines = text.trim().split(\"\\n\");\n  const header = (lines.shift() || \"\").split(\",\").map((h) => h.trim());\n  const out: Record<string, Record<string, string>> = {};\n  for (const line of lines) {\n    const parts = line.split(\",\");\n    const row: Record<string, string> = {};\n    header.forEach((h, i) => {\n      row[h] = (parts[i] || \"\").trim();\n    });\n    const key = `${row.asset}__${row.timeframe}`;\n    out[key] = row;\n  }\n  return out;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,SAAS;IACP,OAAO,4GAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI;AACrC;AAEO,SAAS;IACd,OAAO,QAAQ,GAAG,CAAC,aAAa,IAAI,4GAAI,CAAC,IAAI,CAAC,YAAY,WAAW,aAAa;AACpF;AAEO,eAAe,sBAAsB,EAAU;IACpD,MAAM,OAAO,4GAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,GAAG,KAAK,CAAC;IAC7D,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,MAAM;IACrC,OAAO,KAAK,KAAK,CAAC;AACpB;AAEO,eAAe;IACpB,MAAM,OAAO,4GAAI,CAAC,IAAI,CAAC,iBAAiB;IACxC,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,MAAM;IACrC,MAAM,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC;IAChC,MAAM,SAAS,CAAC,MAAM,KAAK,MAAM,EAAE,EAAE,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI;IACjE,MAAM,MAA8C,CAAC;IACrD,KAAK,MAAM,QAAQ,MAAO;QACxB,MAAM,QAAQ,KAAK,KAAK,CAAC;QACzB,MAAM,MAA8B,CAAC;QACrC,OAAO,OAAO,CAAC,CAAC,GAAG;YACjB,GAAG,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,EAAE,IAAI;QAChC;QACA,MAAM,MAAM,GAAG,IAAI,KAAK,CAAC,EAAE,EAAE,IAAI,SAAS,EAAE;QAC5C,GAAG,CAAC,IAAI,GAAG;IACb;IACA,OAAO;AACT"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pedro%20Henrique/Desktop/A-firma/website-ui/lib/server/data.ts"],"sourcesContent":["import { promises as fs } from \"fs\";\nimport path from \"path\";\nimport { readAssetStatusMap } from \"@/lib/server/validated\";\n\r\nfunction repoRoot() {\r\n  return path.resolve(process.cwd(), \"..\");\r\n}\r\n\r\nexport function dataDirs() {\r\n  const root = repoRoot();\r\n  return {\r\n    latest: process.env.DATA_DIR || path.join(root, \"results\", \"latest\"),\r\n    publicLatest: path.join(process.cwd(), \"public\", \"data\", \"latest\"),\r\n    results: path.join(root, \"results\"),\r\n  };\r\n}\r\n\r\nexport async function listLatestFiles() {\r\n  const { latest, publicLatest } = dataDirs();\r\n  let dir = latest;\r\n  try {\r\n    await fs.access(dir);\r\n  } catch {\r\n    dir = publicLatest;\r\n  }\r\n  const files = await fs.readdir(dir);\r\n  return files.filter((f) => f.endsWith(\".json\"));\r\n}\r\n\r\nexport async function readLatestFile(file: string) {\r\n  const { latest, publicLatest } = dataDirs();\r\n  let dir = latest;\r\n  try {\r\n    await fs.access(dir);\r\n  } catch {\r\n    dir = publicLatest;\r\n  }\r\n  const target = path.join(dir, file);\r\n  try {\r\n    const text = await fs.readFile(target, \"utf-8\");\r\n    return JSON.parse(text);\r\n  } catch {\r\n    // fallback: try other dir\r\n    const fallback = dir === latest ? path.join(publicLatest, file) : path.join(latest, file);\r\n    const text = await fs.readFile(fallback, \"utf-8\");\r\n    return JSON.parse(text);\r\n  }\r\n}\r\n\r\nexport async function findLatestApiRecords() {\n  const { results } = dataDirs();\n  // Preferred source: ops snapshots (production-gated payload).\n  const snapshotsRoot = path.join(results, \"ops\", \"snapshots\");\n  try {\n    const runDirs = await fs.readdir(snapshotsRoot, { withFileTypes: true });\n    const snapCandidates: { path: string; mtime: number }[] = [];\n    for (const ent of runDirs) {\n      if (!ent.isDirectory()) continue;\n      const p = path.join(snapshotsRoot, ent.name, \"api_snapshot.jsonl\");\n      try {\n        const stat = await fs.stat(p);\n        snapCandidates.push({ path: p, mtime: stat.mtimeMs });\n      } catch {\n        // ignore\n      }\n    }\n    snapCandidates.sort((a, b) => b.mtime - a.mtime);\n    if (snapCandidates.length) return snapCandidates[0].path;\n  } catch {\n    // ignore and fallback to legacy search\n  }\n\n  // Legacy fallback: results/*/api_records.jsonl\n  const entries = await fs.readdir(results, { withFileTypes: true });\n  const candidates: { path: string; mtime: number }[] = [];\n  for (const ent of entries) {\n    if (!ent.isDirectory()) continue;\r\n    const p = path.join(results, ent.name, \"api_records.jsonl\");\r\n    try {\r\n      const stat = await fs.stat(p);\r\n      candidates.push({ path: p, mtime: stat.mtimeMs });\r\n    } catch {\r\n      // ignore\r\n    }\r\n  }\r\n  candidates.sort((a, b) => b.mtime - a.mtime);\r\n  return candidates.length ? candidates[0].path : null;\r\n}\r\n\r\nexport async function readJsonl(pathFile: string) {\n  const text = await fs.readFile(pathFile, \"utf-8\");\r\n  return text\r\n    .split(\"\\n\")\r\n    .map((line) => line.trim())\r\n    .filter(Boolean)\r\n    .map((line) => JSON.parse(line));\n}\n\nexport type LatestRunInfo = {\n  runId: string;\n  snapshotPath: string;\n  summaryPath: string;\n  summary: Record<string, unknown>;\n};\n\nfunction isRunValid(summary: Record<string, unknown>) {\n  const status = String(summary?.status || \"\").toLowerCase();\n  const gate = (summary?.deployment_gate || {}) as Record<string, unknown>;\n  const blocked = gate?.blocked === true;\n  return status === \"ok\" && !blocked;\n}\n\nexport async function findLatestValidRun(): Promise<LatestRunInfo | null> {\n  const { results } = dataDirs();\n  const snapshotsRoot = path.join(results, \"ops\", \"snapshots\");\n  let runDirs: string[] = [];\n  try {\n    runDirs = (await fs.readdir(snapshotsRoot, { withFileTypes: true }))\n      .filter((ent) => ent.isDirectory())\n      .map((ent) => ent.name)\n      .sort()\n      .reverse();\n  } catch {\n    return null;\n  }\n\n  for (const runId of runDirs) {\n    const summaryPath = path.join(snapshotsRoot, runId, \"summary.json\");\n    const snapshotPath = path.join(snapshotsRoot, runId, \"api_snapshot.jsonl\");\n    try {\n      const [summaryText, snapshotStat] = await Promise.all([fs.readFile(summaryPath, \"utf-8\"), fs.stat(snapshotPath)]);\n      if (!snapshotStat.size) continue;\n      const summary = JSON.parse(summaryText) as Record<string, unknown>;\n      if (!isRunValid(summary)) continue;\n      return { runId, summaryPath, snapshotPath, summary };\n    } catch {\n      // ignore invalid run and keep scanning older runs\n    }\n  }\n  return null;\n}\n\nexport async function readLatestSnapshot() {\n  const run = await findLatestValidRun();\n  if (!run) return null;\n  const records = await readJsonl(run.snapshotPath);\n  return {\n    runId: run.runId,\n    summary: run.summary,\n    records,\n  };\n}\n\nexport async function readRiskTruthPanel() {\n  const { results } = dataDirs();\n  const target = path.join(results, \"validation\", \"risk_truth_panel.json\");\n  try {\n    const text = await fs.readFile(target, \"utf-8\");\n    return JSON.parse(text);\n  } catch {\n    return {\n      status: \"empty\",\n      counts: { assets: 0, validated: 0, watch: 0, inconclusive: 0 },\n      entries: [],\n    };\n  }\n}\n\nexport async function readGlobalVerdict() {\n  const { results } = dataDirs();\n  const target = path.join(results, \"validation\", \"VERDICT.json\");\n  try {\n    const text = await fs.readFile(target, \"utf-8\");\n    return JSON.parse(text);\n  } catch {\n    return { status: \"unknown\", gate_checks: {} };\n  }\n}\n\nexport async function readJsonlWithValidationGate(pathFile: string) {\n  const records = await readJsonl(pathFile);\n  let statusMap: Record<string, Record<string, string>> = {};\n  try {\n    statusMap = await readAssetStatusMap();\n  } catch {\n    return records;\n  }\n  return records.map((record) => {\n    const key = `${record.asset || \"\"}__${record.timeframe || \"\"}`;\n    const gate = statusMap[key];\n    if (!gate || (gate.status || \"\").toLowerCase() === \"validated\") {\n      return record;\n    }\n    const reason = gate.reason || \"gate_not_validated\";\n    const warnings = Array.isArray(record.warnings) ? [...record.warnings] : [];\n    if (!warnings.includes(\"INCONCLUSIVE_SIGNAL\")) {\n      warnings.push(\"INCONCLUSIVE_SIGNAL\");\n    }\n    return {\n      ...record,\n      signal_status: \"inconclusive\",\n      use_forecast_bool: false,\n      action: \"DIAGNOSTICO_INCONCLUSIVO\",\n      regime_label: \"INCONCLUSIVE\",\n      confidence_level: \"LOW\",\n      warnings,\n      gate_reason: reason,\n    };\n  });\n}\n\r\nexport async function readDashboardOverview() {\r\n  const { results } = dataDirs();\r\n  const overviewPath = path.join(results, \"dashboard\", \"overview.json\");\r\n  const text = await fs.readFile(overviewPath, \"utf-8\");\r\n  return JSON.parse(text);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pedro%20Henrique/Desktop/A-firma/website-ui/app/app/casos/page.tsx"],"sourcesContent":["import { DOMAIN_LABELS, STORY_CASES } from \"@/lib/story/cases\";\nimport { readLatestSnapshot, readRiskTruthPanel } from \"@/lib/server/data\";\n\ntype Domain = \"finance\" | \"macro\" | \"realestate\";\n\nfunction domainCount(entries: Record<string, unknown>[], domain: Domain) {\n  return entries.filter((entry) => {\n    const asset = String(entry.asset_id || \"\");\n    const row = String(entry.domain || \"\");\n    if (row) return row === domain;\n    if (domain === \"finance\") return asset.includes(\"USD\") || asset.includes(\"SPY\") || asset.includes(\"QQQ\");\n    if (domain === \"realestate\") return asset.includes(\"FIPEZAP\") || asset.includes(\"IMOB\");\n    if (domain === \"macro\") return asset.includes(\"DGS\") || asset.includes(\"DX\");\n    return false;\n  }).length;\n}\n\nexport default async function CasosPage() {\n  const [snap, panel] = await Promise.all([readLatestSnapshot(), readRiskTruthPanel()]);\n  const entries = Array.isArray(panel?.entries) ? (panel.entries as Record<string, unknown>[]) : [];\n\n  return (\n    <div className=\"p-5 md:p-6 lg:p-8 space-y-6\">\n      <section className=\"rounded-2xl border border-zinc-800 bg-zinc-950/50 p-5\">\n        <p className=\"text-xs tracking-[0.14em] uppercase text-zinc-500\">Nivel 1 - Storyline</p>\n        <h1 className=\"mt-2 text-2xl md:text-3xl font-semibold text-zinc-100\">Casos reais de transicao de regime</h1>\n        <p className=\"mt-3 text-sm text-zinc-300\">\n          Esta pagina mostra uso operacional do motor como radar de risco. Os textos sao narrativos, mas o status exibido\n          vem do run valido mais recente e do painel de verdade de risco.\n        </p>\n        <div className=\"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm\">\n          {([\"finance\", \"macro\", \"realestate\"] as Domain[]).map((domain) => (\n            <div key={domain} className=\"rounded-xl border border-zinc-800 bg-black/30 p-3\">\n              <div className=\"text-zinc-400\">{DOMAIN_LABELS[domain]}</div>\n              <div className=\"text-xl font-semibold mt-1\">{domainCount(entries, domain)}</div>\n              <div className=\"text-xs text-zinc-500 mt-1\">ativos com classificacao no painel</div>\n            </div>\n          ))}\n        </div>\n        <div className=\"mt-4 text-xs text-zinc-500\">run_id: {snap?.runId || \"indisponivel\"}</div>\n      </section>\n\n      <section className=\"space-y-4\">\n        {STORY_CASES.map((item) => (\n          <article key={item.id} className=\"rounded-2xl border border-zinc-800 bg-zinc-950/45 p-5\">\n            <div className=\"flex flex-wrap items-center gap-2 text-xs\">\n              <span className=\"rounded-full border border-zinc-700 px-2 py-1 text-zinc-300\">{DOMAIN_LABELS[item.domain]}</span>\n              <span className=\"rounded-full border border-zinc-700 px-2 py-1 text-zinc-400\">{item.period}</span>\n            </div>\n            <h2 className=\"mt-3 text-lg md:text-xl font-semibold text-zinc-100\">{item.title}</h2>\n            <div className=\"mt-3 space-y-2 text-sm text-zinc-300\">\n              <p><span className=\"text-zinc-400\">Contexto:</span> {item.why_matters}</p>\n              <p><span className=\"text-zinc-400\">Evento:</span> {item.what_happened}</p>\n              <p><span className=\"text-zinc-400\">Leitura do motor:</span> {item.motor_reading}</p>\n              <p><span className=\"text-zinc-400\">Uso pratico:</span> {item.operational_use}</p>\n              <p><span className=\"text-zinc-400\">Limite:</span> {item.risk_limit}</p>\n            </div>\n            <div className=\"mt-4\">\n              <h3 className=\"text-xs tracking-[0.12em] uppercase text-zinc-500\">Fontes</h3>\n              <ul className=\"mt-2 space-y-1 text-sm\">\n                {item.sources.map((src) => (\n                  <li key={`${item.id}-${src.url}`} className=\"text-zinc-300\">\n                    [{src.level}] {src.title} -{\" \"}\n                    <a className=\"text-emerald-300 hover:text-emerald-200 underline underline-offset-2\" href={src.url} target=\"_blank\" rel=\"noreferrer\">\n                      link\n                    </a>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </article>\n        ))}\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}