{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pedro%20Henrique/Desktop/A-firma/website-ui/components/DashboardFilters.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\ntype UniverseAsset = {\n  asset: string;\n  group?: string;\n};\n\ntype Props = {\n  assets: UniverseAsset[];\n  selected: string[];\n  onSelectedChange: (assets: string[]) => void;\n  sector: string;\n  onSectorChange: (value: string) => void;\n  timeframe: string;\n  onTimeframeChange: (value: string) => void;\n  rangePreset: string;\n  onRangePresetChange: (value: string) => void;\n  normalize: boolean;\n  onNormalizeChange: (value: boolean) => void;\n  showRegimeBands: boolean;\n  onShowRegimeBandsChange: (value: boolean) => void;\n  smoothing: \"none\" | \"ema_short\" | \"ema_long\";\n  onSmoothingChange: (value: \"none\" | \"ema_short\" | \"ema_long\") => void;\n  sectors?: Array<{ value: string; label: string }>;\n};\n\nconst groupLabels: Record<string, string> = {\n  crypto: \"Cripto\",\n  volatility: \"Volatilidade\",\n  commodities_broad: \"Commodities\",\n  energy: \"Energia\",\n  metals: \"Metais\",\n  bonds_rates: \"Juros/Bonds\",\n  fx: \"Moedas\",\n  equities_us_broad: \"Equities US Broad\",\n  equities_us_sectors: \"Equities US Setores\",\n  equities_international: \"Equities Internacionais\",\n  realestate: \"Imobiliario\",\n};\n\nexport default function DashboardFilters(props: Props) {\n  const {\n    assets,\n    selected,\n    onSelectedChange,\n    sector,\n    onSectorChange,\n    timeframe,\n    onTimeframeChange,\n    rangePreset,\n    onRangePresetChange,\n    normalize,\n    onNormalizeChange,\n    showRegimeBands,\n    onShowRegimeBandsChange,\n    smoothing,\n    onSmoothingChange,\n    sectors,\n  } = props;\n\n  const [query, setQuery] = useState(\"\");\n  const [open, setOpen] = useState(false);\n\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return assets\n      .filter((a) => (sectors && sectors.length ? true : sector === \"all\" || (a.group || \"\") === sector))\n      .filter((a) => !q || a.asset.toLowerCase().includes(q) || (a.group || \"\").toLowerCase().includes(q))\n      .slice(0, 100);\n  }, [assets, query, sector, sectors]);\n\n  const sectorsFromAssets = useMemo(() => {\n    const set = new Set<string>();\n    assets.forEach((a) => {\n      if (a.group) set.add(a.group);\n    });\n    return [\"all\", ...Array.from(set).sort()];\n  }, [assets]);\n\n  const toggleAsset = (asset: string) => {\n    if (selected.includes(asset)) {\n      onSelectedChange(selected.filter((a) => a !== asset));\n      return;\n    }\n    if (selected.length >= 12) return;\n    onSelectedChange([...selected, asset]);\n  };\n\n  return (\n    <div className=\"sticky top-2 z-20 rounded-xl border border-zinc-800 bg-zinc-950/95 p-4 md:p-5 backdrop-blur-sm\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-7 gap-3\">\n        <div className=\"xl:col-span-2 relative\">\n          <button\n            className=\"w-full rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-left text-sm\"\n            onClick={() => setOpen((v) => !v)}\n            title=\"Selecionar ativos\"\n          >\n            {selected.length ? `${selected.length} ativos selecionados` : \"Selecionar ativos\"}\n          </button>\n          {open ? (\n            <div className=\"absolute mt-2 w-full max-h-72 overflow-auto rounded-lg border border-zinc-700 bg-zinc-950 p-2 shadow-xl\">\n              <input\n                className=\"mb-2 w-full rounded border border-zinc-700 bg-zinc-900 px-2 py-1.5 text-xs\"\n                placeholder=\"Buscar ativo\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n              />\n              <div className=\"space-y-1\">\n                {filtered.map((a) => (\n                  <label key={a.asset} className=\"flex items-center gap-2 rounded px-1 py-1 text-xs hover:bg-zinc-900\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selected.includes(a.asset)}\n                      onChange={() => toggleAsset(a.asset)}\n                      className=\"h-3 w-3 accent-cyan-400\"\n                    />\n                    <span className=\"font-medium\">{a.asset}</span>\n                    <span className=\"text-zinc-500\">{groupLabels[a.group || \"\"] || a.group || \"\"}</span>\n                  </label>\n                ))}\n              </div>\n            </div>\n          ) : null}\n        </div>\n\n        <select\n          value={sector}\n          onChange={(e) => onSectorChange(e.target.value)}\n          className=\"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm\"\n          title=\"Filtrar por setor\"\n        >\n          {(sectors && sectors.length ? sectors : sectorsFromAssets.map((s) => ({ value: s, label: s === \"all\" ? \"Todos os setores\" : groupLabels[s] || s }))).map((s) => (\n            <option key={s.value} value={s.value}>\n              {s.label}\n            </option>\n          ))}\n        </select>\n\n        <select\n          value={timeframe}\n          onChange={(e) => onTimeframeChange(e.target.value)}\n          className=\"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm\"\n        >\n          <option value=\"daily\">Diario</option>\n          <option value=\"weekly\">Semanal</option>\n        </select>\n\n        <select\n          value={rangePreset}\n          onChange={(e) => onRangePresetChange(e.target.value)}\n          className=\"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm\"\n        >\n          <option value=\"30d\">Ultimos 30d</option>\n          <option value=\"90d\">Ultimos 90d</option>\n          <option value=\"180d\">Ultimos 180d</option>\n          <option value=\"1y\">Ultimo 1y</option>\n          <option value=\"all\">Tudo</option>\n        </select>\n\n        <select\n          value={smoothing}\n          onChange={(e) => onSmoothingChange(e.target.value as \"none\" | \"ema_short\" | \"ema_long\")}\n          className=\"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm\"\n        >\n          <option value=\"none\">Suavizacao: none</option>\n          <option value=\"ema_short\">Suavizacao: EMA curto</option>\n          <option value=\"ema_long\">Suavizacao: EMA longo</option>\n        </select>\n\n        <button\n          className={`rounded-lg border px-3 py-2 text-sm ${normalize ? \"border-cyan-400 text-cyan-300\" : \"border-zinc-700\"}`}\n          onClick={() => onNormalizeChange(!normalize)}\n        >\n          {normalize ? \"Normalizar: ON\" : \"Normalizar: OFF\"}\n        </button>\n\n        <button\n          className={`rounded-lg border px-3 py-2 text-sm ${showRegimeBands ? \"border-cyan-400 text-cyan-300\" : \"border-zinc-700\"}`}\n          onClick={() => onShowRegimeBandsChange(!showRegimeBands)}\n        >\n          {showRegimeBands ? \"Bandas regime: ON\" : \"Bandas regime: OFF\"}\n        </button>\n      </div>\n    </div>\n  );\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AA4BA,MAAM,cAAsC;IAC1C,QAAQ;IACR,YAAY;IACZ,mBAAmB;IACnB,QAAQ;IACR,QAAQ;IACR,aAAa;IACb,IAAI;IACJ,mBAAmB;IACnB,qBAAqB;IACrB,wBAAwB;IACxB,YAAY;AACd;AAEe,SAAS,iBAAiB,KAAY;;IACnD,MAAM,EACJ,MAAM,EACN,QAAQ,EACR,gBAAgB,EAChB,MAAM,EACN,cAAc,EACd,SAAS,EACT,iBAAiB,EACjB,WAAW,EACX,mBAAmB,EACnB,SAAS,EACT,iBAAiB,EACjB,eAAe,EACf,uBAAuB,EACvB,SAAS,EACT,iBAAiB,EACjB,OAAO,EACR,GAAG;IAEJ,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IAEjC,MAAM,WAAW,IAAA,wKAAO;8CAAC;YACvB,MAAM,IAAI,MAAM,IAAI,GAAG,WAAW;YAClC,OAAO,OACJ,MAAM;sDAAC,CAAC,IAAO,WAAW,QAAQ,MAAM,GAAG,OAAO,WAAW,SAAS,CAAC,EAAE,KAAK,IAAI,EAAE,MAAM;qDAC1F,MAAM;sDAAC,CAAC,IAAM,CAAC,KAAK,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,IAAI,EAAE,EAAE,WAAW,GAAG,QAAQ,CAAC;qDAChG,KAAK,CAAC,GAAG;QACd;6CAAG;QAAC;QAAQ;QAAO;QAAQ;KAAQ;IAEnC,MAAM,oBAAoB,IAAA,wKAAO;uDAAC;YAChC,MAAM,MAAM,IAAI;YAChB,OAAO,OAAO;+DAAC,CAAC;oBACd,IAAI,EAAE,KAAK,EAAE,IAAI,GAAG,CAAC,EAAE,KAAK;gBAC9B;;YACA,OAAO;gBAAC;mBAAU,MAAM,IAAI,CAAC,KAAK,IAAI;aAAG;QAC3C;sDAAG;QAAC;KAAO;IAEX,MAAM,cAAc,CAAC;QACnB,IAAI,SAAS,QAAQ,CAAC,QAAQ;YAC5B,iBAAiB,SAAS,MAAM,CAAC,CAAC,IAAM,MAAM;YAC9C;QACF;QACA,IAAI,SAAS,MAAM,IAAI,IAAI;QAC3B,iBAAiB;eAAI;YAAU;SAAM;IACvC;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,WAAU;4BACV,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;4BAC/B,OAAM;sCAEL,SAAS,MAAM,GAAG,GAAG,SAAS,MAAM,CAAC,oBAAoB,CAAC,GAAG;;;;;;wBAE/D,qBACC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,WAAU;oCACV,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;8CAE1C,6LAAC;oCAAI,WAAU;8CACZ,SAAS,GAAG,CAAC,CAAC,kBACb,6LAAC;4CAAoB,WAAU;;8DAC7B,6LAAC;oDACC,MAAK;oDACL,SAAS,SAAS,QAAQ,CAAC,EAAE,KAAK;oDAClC,UAAU,IAAM,YAAY,EAAE,KAAK;oDACnC,WAAU;;;;;;8DAEZ,6LAAC;oDAAK,WAAU;8DAAe,EAAE,KAAK;;;;;;8DACtC,6LAAC;oDAAK,WAAU;8DAAiB,WAAW,CAAC,EAAE,KAAK,IAAI,GAAG,IAAI,EAAE,KAAK,IAAI;;;;;;;2CARhE,EAAE,KAAK;;;;;;;;;;;;;;;mCAavB;;;;;;;8BAGN,6LAAC;oBACC,OAAO;oBACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oBAC9C,WAAU;oBACV,OAAM;8BAEL,CAAC,WAAW,QAAQ,MAAM,GAAG,UAAU,kBAAkB,GAAG,CAAC,CAAC,IAAM,CAAC;4BAAE,OAAO;4BAAG,OAAO,MAAM,QAAQ,qBAAqB,WAAW,CAAC,EAAE,IAAI;wBAAE,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,kBACxJ,6LAAC;4BAAqB,OAAO,EAAE,KAAK;sCACjC,EAAE,KAAK;2BADG,EAAE,KAAK;;;;;;;;;;8BAMxB,6LAAC;oBACC,OAAO;oBACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;oBACjD,WAAU;;sCAEV,6LAAC;4BAAO,OAAM;sCAAQ;;;;;;sCACtB,6LAAC;4BAAO,OAAM;sCAAS;;;;;;;;;;;;8BAGzB,6LAAC;oBACC,OAAO;oBACP,UAAU,CAAC,IAAM,oBAAoB,EAAE,MAAM,CAAC,KAAK;oBACnD,WAAU;;sCAEV,6LAAC;4BAAO,OAAM;sCAAM;;;;;;sCACpB,6LAAC;4BAAO,OAAM;sCAAM;;;;;;sCACpB,6LAAC;4BAAO,OAAM;sCAAO;;;;;;sCACrB,6LAAC;4BAAO,OAAM;sCAAK;;;;;;sCACnB,6LAAC;4BAAO,OAAM;sCAAM;;;;;;;;;;;;8BAGtB,6LAAC;oBACC,OAAO;oBACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;oBACjD,WAAU;;sCAEV,6LAAC;4BAAO,OAAM;sCAAO;;;;;;sCACrB,6LAAC;4BAAO,OAAM;sCAAY;;;;;;sCAC1B,6LAAC;4BAAO,OAAM;sCAAW;;;;;;;;;;;;8BAG3B,6LAAC;oBACC,WAAW,CAAC,oCAAoC,EAAE,YAAY,kCAAkC,mBAAmB;oBACnH,SAAS,IAAM,kBAAkB,CAAC;8BAEjC,YAAY,mBAAmB;;;;;;8BAGlC,6LAAC;oBACC,WAAW,CAAC,oCAAoC,EAAE,kBAAkB,kCAAkC,mBAAmB;oBACzH,SAAS,IAAM,wBAAwB,CAAC;8BAEvC,kBAAkB,sBAAsB;;;;;;;;;;;;;;;;;AAKnD;GAjJwB;KAAA"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pedro%20Henrique/Desktop/A-firma/website-ui/components/RegimeChart.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\ntype Point = { date: string; price: number | null; confidence: number; regime: string };\ntype LegacyPoint = { t: number; confidence: number; regime: string };\n\ntype SeriesMap = Record<string, Point[]>;\n\ntype Props = {\n  data: SeriesMap | Point[] | LegacyPoint[];\n  selected?: string[];\n  normalize?: boolean;\n  showRegimeBands?: boolean;\n  smoothing?: \"none\" | \"ema_short\" | \"ema_long\";\n  rangePreset?: string;\n};\n\nconst regimeColors: Record<string, string> = {\n  STABLE: \"rgba(52,211,153,0.14)\",\n  TRANSITION: \"rgba(251,191,36,0.14)\",\n  UNSTABLE: \"rgba(251,113,133,0.14)\",\n};\n\nconst lineColors = [\"#38bdf8\", \"#22c55e\", \"#f97316\", \"#a855f7\", \"#facc15\", \"#14b8a6\", \"#f472b6\", \"#60a5fa\"];\n\nfunction formatDate(d: string) {\n  if (!d) return \"\";\n  const t = new Date(`${d}T00:00:00Z`);\n  const mm = String(t.getUTCMonth() + 1).padStart(2, \"0\");\n  const yy = String(t.getUTCFullYear()).slice(-2);\n  return `${mm}/${yy}`;\n}\n\nfunction formatValue(v: number) {\n  const a = Math.abs(v);\n  if (a >= 1_000_000) return `${(v / 1_000_000).toFixed(1)}M`;\n  if (a >= 1_000) return `${(v / 1_000).toFixed(1)}K`;\n  return v.toFixed(2);\n}\n\nfunction ema(values: number[], period: number) {\n  if (!values.length) return values;\n  const alpha = 2 / (period + 1);\n  const out = [values[0]];\n  for (let i = 1; i < values.length; i += 1) {\n    out.push(alpha * values[i] + (1 - alpha) * out[i - 1]);\n  }\n  return out;\n}\n\nfunction downsample<T>(arr: T[], max = 2000) {\n  if (arr.length <= max) return arr;\n  const step = Math.ceil(arr.length / max);\n  return arr.filter((_, idx) => idx % step === 0);\n}\n\nfunction rangeCount(preset: string) {\n  if (preset === \"30d\") return 30;\n  if (preset === \"90d\") return 90;\n  if (preset === \"180d\") return 180;\n  if (preset === \"1y\") return 252;\n  return 0;\n}\n\nexport default function RegimeChart(props: Props) {\n  const {\n    data,\n    selected = [],\n    normalize = false,\n    showRegimeBands = true,\n    smoothing = \"none\",\n    rangePreset = \"all\",\n  } = props;\n  const [hidden, setHidden] = useState<Record<string, boolean>>({});\n  const [hoverIndex, setHoverIndex] = useState<number | null>(null);\n\n  const prepared = useMemo(() => {\n    const normalizeLegacy = (arr: Array<Point | LegacyPoint>): Point[] =>\n      arr.map((p, i) => {\n        if (\"date\" in p) return p;\n        return {\n          date: String(p.t ?? i),\n          price: Number.isFinite(p.confidence) ? p.confidence : null,\n          confidence: p.confidence ?? 0,\n          regime: p.regime ?? \"TRANSITION\",\n        };\n      });\n\n    const dataMap: SeriesMap = Array.isArray(data)\n      ? { SERIES: normalizeLegacy(data) }\n      : data;\n    const baseSelection = selected.length ? selected : Object.keys(dataMap);\n    const active = baseSelection.filter((a) => !hidden[a] && (dataMap[a] || []).length);\n    if (!active.length) return null;\n\n    let commonLen = Math.min(...active.map((a) => dataMap[a].length));\n    const rc = rangeCount(rangePreset);\n    if (rc > 0) commonLen = Math.min(commonLen, rc);\n\n    const aligned = active.map((a) => ({\n      asset: a,\n      points: dataMap[a].slice(-commonLen),\n    }));\n\n    const sampled = aligned.map((s) => ({\n      asset: s.asset,\n      points: downsample(s.points, 1600),\n    }));\n\n    const series = sampled.map((s) => {\n      const prices = s.points.map((p) => (p.price == null ? NaN : p.price));\n      const base = prices.find((v) => Number.isFinite(v)) || 1;\n      const normalized = prices.map((v) => (Number.isFinite(v) ? (v / base) * 100 : NaN));\n      const source = normalize ? normalized : prices;\n      const smooth =\n        smoothing === \"ema_short\" ? ema(source as number[], 8) : smoothing === \"ema_long\" ? ema(source as number[], 20) : source;\n      return {\n        asset: s.asset,\n        points: s.points,\n        values: smooth,\n      };\n    });\n\n    const allValues = series.flatMap((s) => s.values).filter((v) => Number.isFinite(v)) as number[];\n    if (!allValues.length) return null;\n\n    const ymin = Math.min(...allValues);\n    const ymax = Math.max(...allValues);\n\n    return {\n      series,\n      ymin,\n      ymax,\n      count: series[0].values.length,\n      focus: series[0].points,\n    };\n  }, [data, selected, normalize, smoothing, hidden, rangePreset]);\n\n  const width = 1200;\n  const height = 480;\n  const pad = 56;\n\n  const scaleX = (i: number, total: number) => pad + (i / Math.max(1, total - 1)) * (width - pad * 2);\n  const scaleY = (v: number, ymin: number, ymax: number, h: number) => h - pad - ((v - ymin) / Math.max(1e-9, ymax - ymin)) * (h - pad * 2);\n\n  if (!prepared) return <div className=\"text-sm text-zinc-500\">Selecione ativos para visualizar o grafico.</div>;\n\n  const h = height;\n  const hover = hoverIndex != null ? Math.min(hoverIndex, prepared.count - 1) : null;\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex items-center justify-between text-xs text-zinc-400\">\n        <div>Grafico principal</div>\n        <button\n          className=\"rounded border border-zinc-700 px-2 py-1 hover:border-zinc-500\"\n          onClick={() => setHidden({})}\n        >\n          Reset series\n        </button>\n      </div>\n\n      <div className=\"rounded-xl border border-zinc-800 p-4 md:p-5 bg-transparent\">\n        <svg\n          viewBox={`0 0 ${width} ${h}`}\n          className=\"w-full h-[360px] lg:h-[500px]\"\n          onMouseMove={(e) => {\n            const rect = (e.currentTarget as SVGSVGElement).getBoundingClientRect();\n            const localX = e.clientX - rect.left;\n            const idx = Math.round(((localX - pad) / Math.max(1, rect.width - 2 * pad)) * (prepared.count - 1));\n            setHoverIndex(Math.max(0, Math.min(prepared.count - 1, idx)));\n          }}\n          onMouseLeave={() => setHoverIndex(null)}\n        >\n          {showRegimeBands\n            ? prepared.focus.map((p, i, arr) => {\n                if (i === 0) return null;\n                const x0 = scaleX(i - 1, arr.length);\n                const x1 = scaleX(i, arr.length);\n                const regime = p.regime in regimeColors ? p.regime : \"TRANSITION\";\n                return <rect key={`band-${i}`} x={x0} y={pad} width={Math.max(1, x1 - x0)} height={h - 2 * pad} fill={regimeColors[regime]} />;\n              })\n            : null}\n\n          {Array.from({ length: 5 }).map((_, i) => {\n            const y = pad + ((h - 2 * pad) * i) / 4;\n            const v = prepared.ymax - ((prepared.ymax - prepared.ymin) * i) / 4;\n            return (\n              <g key={`y-${i}`}>\n                <line x1={pad} y1={y} x2={width - pad} y2={y} stroke=\"rgba(148,163,184,0.14)\" />\n                <text x={pad - 10} y={y + 4} textAnchor=\"end\" fill=\"#94a3b8\" fontSize=\"11\">\n                  {formatValue(v)}\n                </text>\n              </g>\n            );\n          })}\n\n          {Array.from({ length: 6 }).map((_, i) => {\n            const idx = Math.round((i / 5) * (prepared.count - 1));\n            const x = scaleX(idx, prepared.count);\n            const dt = prepared.series[0].points[idx]?.date;\n            return (\n              <g key={`x-${i}`}>\n                <line x1={x} y1={pad} x2={x} y2={h - pad} stroke=\"rgba(148,163,184,0.08)\" />\n                <text x={x} y={h - pad + 18} textAnchor=\"middle\" fill=\"#94a3b8\" fontSize=\"11\">\n                  {formatDate(dt)}\n                </text>\n              </g>\n            );\n          })}\n\n          {prepared.series.map((s, idx) => {\n            const d = s.values\n              .map((v, i) => (Number.isFinite(v) ? `${i === 0 ? \"M\" : \"L\"} ${scaleX(i, s.values.length)} ${scaleY(v, prepared.ymin, prepared.ymax, h)}` : \"\"))\n              .join(\" \");\n            return <path key={s.asset} d={d} fill=\"none\" stroke={lineColors[idx % lineColors.length]} strokeWidth=\"2.2\" />;\n          })}\n\n          {hover != null ? (\n            <line x1={scaleX(hover, prepared.count)} y1={pad} x2={scaleX(hover, prepared.count)} y2={h - pad} stroke=\"rgba(226,232,240,0.5)\" strokeDasharray=\"4 4\" />\n          ) : null}\n        </svg>\n      </div>\n\n      <div className=\"flex flex-wrap gap-2 text-xs\">\n        {prepared.series.map((s, idx) => (\n          <button\n            key={s.asset}\n            className={`rounded-full border px-2 py-1 ${hidden[s.asset] ? \"border-zinc-700 text-zinc-500\" : \"border-zinc-600 text-zinc-200\"}`}\n            onClick={() => setHidden((prev) => ({ ...prev, [s.asset]: !prev[s.asset] }))}\n          >\n            <span className=\"inline-block h-2 w-2 rounded-full mr-2\" style={{ background: lineColors[idx % lineColors.length] }} />\n            {s.asset}\n          </button>\n        ))}\n      </div>\n\n      {hover != null ? (\n        <div className=\"rounded-lg border border-zinc-800 bg-zinc-950 px-3 py-2 text-xs text-zinc-300\">\n          <div>Data: {prepared.series[0].points[hover]?.date || \"--\"}</div>\n          <div>Regime: {prepared.series[0].points[hover]?.regime || \"--\"}</div>\n          <div>Confianca: {((prepared.series[0].points[hover]?.confidence || 0) * 100).toFixed(1)}%</div>\n          <div>Qualidade: {((prepared.series[0].points[hover]?.confidence || 0) * 0.92 * 100).toFixed(1)}%</div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 768, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pedro%20Henrique/Desktop/A-firma/website-ui/components/SectorDashboard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport DashboardFilters from \"@/components/DashboardFilters\";\nimport RegimeChart from \"@/components/RegimeChart\";\n\ntype SeriesPoint = {\n  date: string;\n  price: number | null;\n  confidence: number;\n  regime: string;\n};\n\ntype UniverseAsset = {\n  asset: string;\n  group?: string;\n  domain?: string;\n  state?: { label?: string };\n  metrics?: { confidence?: number; quality?: number };\n  validation?: { status?: string; reasons?: string[] };\n  confidence?: number;\n  quality?: number;\n  signal_status?: string;\n  reason?: string;\n  risk_truth_status?: string;\n};\n\ntype ForecastPoint = {\n  y_pred?: number;\n};\n\nconst regimeColor: Record<string, string> = {\n  STABLE: \"text-emerald-300\",\n  TRANSITION: \"text-amber-300\",\n  UNSTABLE: \"text-rose-300\",\n  INCONCLUSIVE: \"text-zinc-400\",\n};\n\nconst groupLabels: Record<string, string> = {\n  crypto: \"Cripto\",\n  volatility: \"Volatilidade\",\n  commodities_broad: \"Commodities\",\n  energy: \"Energia\",\n  metals: \"Metais\",\n  bonds_rates: \"Juros/Bonds\",\n  fx: \"Moedas\",\n  equities_us_broad: \"Equities US Broad\",\n  equities_us_sectors: \"Equities US Setores\",\n  equities_international: \"Equities Internacionais\",\n  realestate: \"Imobiliario\",\n};\n\nfunction cleanRegime(label?: string) {\n  if (!label) return \"TRANSITION\";\n  if (label === \"NOISY\") return \"UNSTABLE\";\n  if (label === \"STABLE\" || label === \"TRANSITION\" || label === \"UNSTABLE\" || label === \"INCONCLUSIVE\") return label;\n  return \"TRANSITION\";\n}\n\nfunction mean(nums: number[]) {\n  if (!nums.length) return 0;\n  return nums.reduce((a, b) => a + b, 0) / nums.length;\n}\n\nexport default function SectorDashboard({\n  title,\n  showTable = true,\n  initialDomain = \"finance\",\n}: {\n  title: string;\n  showTable?: boolean;\n  initialDomain?: \"finance\" | \"energy\" | \"realestate\";\n}) {\n  const [timeframe, setTimeframe] = useState(\"daily\");\n  const [sector, setSector] = useState(initialDomain);\n  const [statusTab, setStatusTab] = useState<\"validated\" | \"watch\" | \"inconclusive\">(\"validated\");\n  const [showInconclusive, setShowInconclusive] = useState(false);\n  const [rangePreset, setRangePreset] = useState(\"180d\");\n  const [normalize, setNormalize] = useState(false);\n  const [showRegimeBands, setShowRegimeBands] = useState(true);\n  const [smoothing, setSmoothing] = useState<\"none\" | \"ema_short\" | \"ema_long\">(\"none\");\n  const [summaryHorizon, setSummaryHorizon] = useState<1 | 5 | 10>(5);\n\n  const [universe, setUniverse] = useState<UniverseAsset[]>([]);\n  const [selected, setSelected] = useState<string[]>([]);\n  const [seriesByAsset, setSeriesByAsset] = useState<Record<string, SeriesPoint[]>>({});\n  const [forecastByAsset, setForecastByAsset] = useState<Record<string, Record<number, ForecastPoint | null>>>({});\n  const [loading, setLoading] = useState(false);\n  const [runMeta, setRunMeta] = useState<{ run_id?: string; global_verdict_status?: string } | null>(null);\n  const [runSummary, setRunSummary] = useState<Record<string, unknown> | null>(null);\n  const [riskTruthCounts, setRiskTruthCounts] = useState<Record<string, number> | null>(null);\n\n  useEffect(() => {\n    const loadUniverse = async () => {\n      const statuses = statusTab === \"inconclusive\" ? \"inconclusive\" : \"validated,watch\";\n      const includeInconclusive = showInconclusive || statusTab === \"inconclusive\" ? 1 : 0;\n      const [runRes, riskRes, assetsRes] = await Promise.all([\n        fetch(\"/api/run/latest\"),\n        fetch(\"/api/risk-truth\"),\n        fetch(\n          `/api/assets?domain=${encodeURIComponent(sector)}&status=${encodeURIComponent(\n            statuses\n          )}&include_inconclusive=${includeInconclusive}`\n        ),\n      ]);\n\n      if (runRes.ok) {\n        const runJson = await runRes.json();\n        setRunMeta({ run_id: runJson?.run_id, global_verdict_status: runJson?.global_verdict_status });\n        setRunSummary((runJson?.summary as Record<string, unknown>) || null);\n      } else {\n        setRunMeta(null);\n        setRunSummary(null);\n      }\n\n      if (riskRes.ok) {\n        const riskJson = await riskRes.json();\n        setRiskTruthCounts((riskJson?.counts as Record<string, number>) || null);\n      } else {\n        setRiskTruthCounts(null);\n      }\n\n      const assetsJson = await assetsRes.json();\n      const data = assetsJson?.records;\n      if (!Array.isArray(data)) {\n        setUniverse([]);\n        setSelected([]);\n        return;\n      }\n      setUniverse(data);\n      setSelected((prev) => {\n        const approved = data.filter((u: UniverseAsset) => (u.risk_truth_status || \"validated\") === \"validated\");\n        const preferred = approved.length ? approved : data;\n        const valid = prev.filter((a) => preferred.find((u: UniverseAsset) => u.asset === a));\n        return valid.length ? valid : preferred.slice(0, 4).map((u: UniverseAsset) => u.asset);\n      });\n    };\n    loadUniverse();\n  }, [timeframe, sector, statusTab, showInconclusive]);\n\n  useEffect(() => {\n    if (!universe.length) return;\n    const scoped = universe.map((u) => u.asset);\n    setSelected((prev) => {\n      const kept = prev.filter((a) => scoped.includes(a));\n      if (kept.length) return kept;\n      return scoped.slice(0, 6);\n    });\n  }, [universe]);\n\n  useEffect(() => {\n    const loadSeries = async () => {\n      if (!selected.length) {\n        setSeriesByAsset({});\n        return;\n      }\n      setLoading(true);\n      try {\n        const seriesRes = await fetch(`/api/graph/series-batch?assets=${selected.join(\",\")}&tf=${timeframe}&limit=2000`);\n        const seriesJson = await seriesRes.json();\n        setSeriesByAsset(seriesJson || {});\n\n        const forecasts: Record<string, Record<number, ForecastPoint | null>> = {};\n        await Promise.all(\n          selected.map(async (asset) => {\n            forecasts[asset] = { 1: null, 5: null, 10: null };\n            try {\n              await Promise.all(\n                [1, 5, 10].map(async (h) => {\n                  try {\n                    const f = await fetch(`/api/files/forecast_suite/${asset}/${timeframe}/${asset}_${timeframe}_log_return_h${h}.json`);\n                    if (!f.ok) {\n                      forecasts[asset][h] = null;\n                      return;\n                    }\n                    const j = await f.json();\n                    const preds = Array.isArray(j?.predictions) ? j.predictions : [];\n                    forecasts[asset][h] = preds.length ? preds[preds.length - 1] : null;\n                  } catch {\n                    forecasts[asset][h] = null;\n                  }\n                })\n              );\n            } catch {\n              forecasts[asset] = { 1: null, 5: null, 10: null };\n            }\n          })\n        );\n        setForecastByAsset(forecasts);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadSeries();\n  }, [selected, timeframe]);\n\n  const metrics = useMemo(() => {\n    const activeSeries = selected.flatMap((a) => seriesByAsset[a] || []);\n    const lastPoints = selected.map((a) => (seriesByAsset[a] || [])[Math.max(0, (seriesByAsset[a] || []).length - 1)]).filter(Boolean) as SeriesPoint[];\n    const avgConf = mean(lastPoints.map((p) => p.confidence || 0));\n    const unstableCount = lastPoints.filter((p) => cleanRegime(p.regime) === \"UNSTABLE\").length;\n    const dominantRegime = (() => {\n      const counts: Record<string, number> = {};\n      lastPoints.forEach((p) => {\n        const r = cleanRegime(p.regime);\n        counts[r] = (counts[r] || 0) + 1;\n      });\n      return Object.entries(counts).sort((a, b) => b[1] - a[1])[0]?.[0] || \"TRANSITION\";\n    })();\n    return {\n      state: dominantRegime,\n      confidence: avgConf,\n      quality: Math.max(0, Math.min(1, avgConf * 0.9)),\n      alerts: unstableCount,\n      sampleSize: activeSeries.length,\n    };\n  }, [selected, seriesByAsset]);\n\n  const tableRows = useMemo(() => {\n    return selected.map((asset) => {\n      const series = seriesByAsset[asset] || [];\n      const last = series[series.length - 1];\n      const first = series[0];\n      const conf = last?.confidence ?? 0;\n      const regime = cleanRegime(last?.regime);\n      const rowMeta = universe.find((u) => u.asset === asset);\n      const vStatus = rowMeta?.risk_truth_status || rowMeta?.signal_status || \"validated\";\n      const vReason = rowMeta?.reason || \"\";\n      const ret = forecastByAsset[asset]?.[summaryHorizon]?.y_pred;\n      const lastRegimeIdx = series.length - 1;\n      let streak = 0;\n      for (let i = lastRegimeIdx; i >= 0; i -= 1) {\n        if (cleanRegime(series[i]?.regime) === regime) streak += 1;\n        else break;\n      }\n      const regimeDurationDays = timeframe === \"weekly\" ? streak * 7 : streak;\n      let action = \"Aguardar\";\n      if (regime === \"STABLE\" && conf >= 0.6) action = \"Aplicar\";\n      if (regime === \"UNSTABLE\" || conf < 0.45) action = \"Nao operar\";\n      if (vStatus !== \"validated\") action = \"Diagnostico inconclusivo\";\n      return {\n        asset,\n        group: groupLabels[rowMeta?.group || \"\"] || rowMeta?.group || \"\",\n        regime: vStatus !== \"validated\" ? \"INCONCLUSIVE\" : regime,\n        confidence: conf,\n        quality: rowMeta?.quality ?? rowMeta?.metrics?.quality,\n        period: first && last ? `${first.date} -> ${last.date}` : \"--\",\n        regimeDurationDays,\n        price: last?.price,\n        forecast: ret,\n        action,\n        validationStatus: vStatus,\n        validationReason: vReason,\n      };\n    });\n  }, [selected, seriesByAsset, forecastByAsset, universe, summaryHorizon, timeframe]);\n\n  return (\n    <div className=\"p-4 md:p-5 space-y-4 md:space-y-5\">\n      <div className=\"space-y-2\">\n        <div className=\"text-xs uppercase tracking-[0.2em] text-zinc-400\">{title}</div>\n        <h1 className=\"text-2xl font-semibold\">Regimes por setor com projecao integrada</h1>\n        <p className=\"text-sm text-zinc-400\">Leitura estrutural do mercado com confianca e forecast condicional.</p>\n        {runMeta?.global_verdict_status && String(runMeta.global_verdict_status).toLowerCase() !== \"pass\" ? (\n          <div className=\"rounded-lg border border-rose-500/40 bg-rose-950/40 px-3 py-2 text-xs text-rose-200\">\n            Global gate FAIL: sinais nao acionaveis.\n          </div>\n        ) : null}\n        {runSummary && (runSummary?.deployment_gate as Record<string, unknown> | undefined)?.blocked === true ? (\n          <div className=\"rounded-lg border border-amber-500/40 bg-amber-950/40 px-3 py-2 text-xs text-amber-200\">\n            Deployment gate BLOCKED: exibindo dados em modo diagnostico.\n          </div>\n        ) : null}\n        <div className=\"flex flex-wrap gap-2 text-xs text-zinc-400\">\n          <span>Run: {runMeta?.run_id || \"--\"}</span>\n          <span>Validados: {riskTruthCounts?.validated ?? \"--\"}</span>\n          <span>Watch: {riskTruthCounts?.watch ?? \"--\"}</span>\n          <span>Inconclusivos: {riskTruthCounts?.inconclusive ?? \"--\"}</span>\n        </div>\n        <div className=\"flex flex-wrap items-center gap-2 text-xs\">\n          {([\"validated\", \"watch\", \"inconclusive\"] as const).map((k) => (\n            <button\n              key={k}\n              onClick={() => setStatusTab(k)}\n              className={`rounded-md border px-2 py-1 ${\n                statusTab === k ? \"border-cyan-400 text-cyan-300\" : \"border-zinc-700 text-zinc-400\"\n              }`}\n            >\n              {k}\n            </button>\n          ))}\n          <label className=\"ml-2 inline-flex items-center gap-2 text-zinc-400\">\n            <input\n              type=\"checkbox\"\n              checked={showInconclusive}\n              onChange={(e) => setShowInconclusive(e.target.checked)}\n              className=\"h-3 w-3 accent-cyan-400\"\n            />\n            Mostrar inconclusivos\n          </label>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\n        <Card label=\"Estado\" value={metrics.state} tone={metrics.state} />\n        <Card label=\"Confianca\" value={`${(metrics.confidence * 100).toFixed(1)}%`} />\n        <Card label=\"Qualidade\" value={`${(metrics.quality * 100).toFixed(1)}%`} />\n        <Card label=\"Alertas\" value={String(metrics.alerts)} />\n      </div>\n\n      <div className=\"rounded-2xl border border-zinc-800 bg-zinc-950/60 p-4 md:p-5 space-y-4\">\n        <DashboardFilters\n          assets={universe}\n          selected={selected}\n          onSelectedChange={setSelected}\n          sector={sector}\n          onSectorChange={(value: string) => setSector(value as \"finance\" | \"energy\" | \"realestate\")}\n          sectors={[\n            { value: \"finance\", label: \"Finance / Trading\" },\n            { value: \"energy\", label: \"Macro / Operacoes\" },\n            { value: \"realestate\", label: \"Imobiliario\" },\n          ]}\n          timeframe={timeframe}\n          onTimeframeChange={setTimeframe}\n          rangePreset={rangePreset}\n          onRangePresetChange={setRangePreset}\n          normalize={normalize}\n          onNormalizeChange={setNormalize}\n          showRegimeBands={showRegimeBands}\n          onShowRegimeBandsChange={setShowRegimeBands}\n          smoothing={smoothing}\n          onSmoothingChange={setSmoothing}\n        />\n\n        {loading ? <div className=\"text-sm text-zinc-500\">Carregando series...</div> : null}\n\n        <RegimeChart\n          data={seriesByAsset}\n          selected={selected}\n          normalize={normalize}\n          showRegimeBands={showRegimeBands}\n          smoothing={smoothing}\n          rangePreset={rangePreset}\n        />\n      </div>\n\n      {showTable ? (\n        <div className=\"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-4 md:gap-5\">\n          <div className=\"rounded-2xl border border-zinc-800 bg-zinc-950/60 p-4 md:p-5\">\n            <div className=\"text-sm uppercase tracking-widest text-zinc-400\">Tabela por ativo</div>\n            <div className=\"mt-3 overflow-auto\">\n              <table className=\"w-full text-xs\">\n                <thead className=\"text-zinc-500 uppercase\">\n                  <tr>\n                    <th className=\"text-left py-2\">Ativo</th>\n                    <th className=\"text-left py-2\">Setor</th>\n                    <th className=\"text-left py-2\">Periodo</th>\n                    <th className=\"text-left py-2\">Regime</th>\n                    <th className=\"text-left py-2\">Duracao</th>\n                    <th className=\"text-left py-2\">Conf.</th>\n                    <th className=\"text-left py-2\">Qual.</th>\n                    <th className=\"text-left py-2\">Preco</th>\n                    <th className=\"text-left py-2\">Proj. h{summaryHorizon}</th>\n                    <th className=\"text-left py-2\">Acao</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {tableRows.map((r) => (\n                    <tr key={r.asset} className=\"border-t border-zinc-800/70 text-zinc-300\">\n                      <td className=\"py-2\">{r.asset}</td>\n                      <td className=\"py-2 text-zinc-400\">{r.group || \"-\"}</td>\n                      <td className=\"py-2 text-zinc-400\">{r.period}</td>\n                      <td className={`py-2 ${regimeColor[r.regime] || \"text-zinc-300\"}`}>{r.regime}</td>\n                      <td className=\"py-2 text-zinc-400\">{r.regimeDurationDays}d</td>\n                      <td className=\"py-2\">{(r.confidence * 100).toFixed(1)}%</td>\n                      <td className=\"py-2\">{r.quality != null ? `${(r.quality * 100).toFixed(1)}%` : \"--\"}</td>\n                      <td className=\"py-2\">{r.price != null ? r.price.toFixed(2) : \"--\"}</td>\n                      <td className=\"py-2\">{r.forecast != null ? `${(r.forecast * 100).toFixed(2)}%` : \"--\"}</td>\n                      <td className=\"py-2\" title={r.validationReason || \"\"}>{r.action}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div className=\"rounded-2xl border border-zinc-800 bg-zinc-950/60 p-4 md:p-5 space-y-3\">\n            <div className=\"text-sm uppercase tracking-widest text-zinc-400\">Resumo</div>\n            <div className=\"flex items-center gap-2 text-xs\">\n              <span className=\"text-zinc-400\">Horizonte:</span>\n              {[1, 5, 10].map((h) => (\n                <button\n                  key={h}\n                  className={`rounded-md border px-2 py-1 ${summaryHorizon === h ? \"border-cyan-400 text-cyan-300\" : \"border-zinc-700 text-zinc-300\"}`}\n                  onClick={() => setSummaryHorizon(h as 1 | 5 | 10)}\n                >\n                  h{h}\n                </button>\n              ))}\n            </div>\n            <div className=\"text-xs text-zinc-300\">Amostras no chart: {metrics.sampleSize}</div>\n            <div className=\"text-xs text-zinc-300\">Ativos selecionados: {selected.length}</div>\n            <div className=\"text-xs text-zinc-300\">Regime dominante: {metrics.state}</div>\n            <div className=\"text-xs text-zinc-300\">Confianca media: {(metrics.confidence * 100).toFixed(1)}%</div>\n            {tableRows.slice(0, 3).map((r) => (\n              <div key={r.asset} className=\"rounded-lg border border-zinc-800 p-2 text-xs\">\n                <div className=\"font-medium text-zinc-200\">{r.asset}</div>\n                <div className=\"text-zinc-400\">{r.period}</div>\n                <div className=\"text-zinc-300\">\n                  {r.regime} por ~{r.regimeDurationDays}d â€¢ h{summaryHorizon}: {r.forecast != null ? `${(r.forecast * 100).toFixed(2)}%` : \"--\"}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nfunction Card({ label, value, tone }: { label: string; value: string; tone?: string }) {\n  const color = tone === \"STABLE\" ? \"text-emerald-300\" : tone === \"UNSTABLE\" ? \"text-rose-300\" : tone === \"TRANSITION\" ? \"text-amber-300\" : \"text-zinc-100\";\n  return (\n    <div className=\"rounded-xl border border-zinc-800 bg-zinc-950/70 p-3 md:p-4\">\n      <div className=\"text-[11px] uppercase tracking-[0.2em] text-zinc-500\">{label}</div>\n      <div className={`mt-1 text-lg md:text-xl font-semibold ${color}`}>{value}</div>\n    </div>\n  );\n}\r\n"],"names":[],"mappings":"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"}}]
}