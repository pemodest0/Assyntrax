{"version":3,"sources":["../../../../lib/server/data.ts","../../../../lib/server/validated.ts","../../../../lib/story/cases.ts","../../../../app/app/casos/page.tsx"],"sourcesContent":["import { promises as fs } from \"fs\";\nimport path from \"path\";\nimport { readAssetStatusMap } from \"@/lib/server/validated\";\n\r\nfunction repoRoot() {\r\n  return path.resolve(process.cwd(), \"..\");\r\n}\r\n\r\nexport function dataDirs() {\r\n  const root = repoRoot();\r\n  return {\r\n    latest: process.env.DATA_DIR || path.join(root, \"results\", \"latest\"),\r\n    publicLatest: path.join(process.cwd(), \"public\", \"data\", \"latest\"),\r\n    results: path.join(root, \"results\"),\r\n  };\r\n}\r\n\r\nexport async function listLatestFiles() {\r\n  const { latest, publicLatest } = dataDirs();\r\n  let dir = latest;\r\n  try {\r\n    await fs.access(dir);\r\n  } catch {\r\n    dir = publicLatest;\r\n  }\r\n  const files = await fs.readdir(dir);\r\n  return files.filter((f) => f.endsWith(\".json\"));\r\n}\r\n\r\nexport async function readLatestFile(file: string) {\r\n  const { latest, publicLatest } = dataDirs();\r\n  let dir = latest;\r\n  try {\r\n    await fs.access(dir);\r\n  } catch {\r\n    dir = publicLatest;\r\n  }\r\n  const target = path.join(dir, file);\r\n  try {\r\n    const text = await fs.readFile(target, \"utf-8\");\r\n    return JSON.parse(text);\r\n  } catch {\r\n    // fallback: try other dir\r\n    const fallback = dir === latest ? path.join(publicLatest, file) : path.join(latest, file);\r\n    const text = await fs.readFile(fallback, \"utf-8\");\r\n    return JSON.parse(text);\r\n  }\r\n}\r\n\r\nexport async function findLatestApiRecords() {\n  const { results } = dataDirs();\n  // Preferred source: ops snapshots (production-gated payload).\n  const snapshotsRoot = path.join(results, \"ops\", \"snapshots\");\n  try {\n    const runDirs = await fs.readdir(snapshotsRoot, { withFileTypes: true });\n    const snapCandidates: { path: string; mtime: number }[] = [];\n    for (const ent of runDirs) {\n      if (!ent.isDirectory()) continue;\n      const p = path.join(snapshotsRoot, ent.name, \"api_snapshot.jsonl\");\n      try {\n        const stat = await fs.stat(p);\n        snapCandidates.push({ path: p, mtime: stat.mtimeMs });\n      } catch {\n        // ignore\n      }\n    }\n    snapCandidates.sort((a, b) => b.mtime - a.mtime);\n    if (snapCandidates.length) return snapCandidates[0].path;\n  } catch {\n    // ignore and fallback to legacy search\n  }\n\n  // Legacy fallback: results/*/api_records.jsonl\n  const entries = await fs.readdir(results, { withFileTypes: true });\n  const candidates: { path: string; mtime: number }[] = [];\n  for (const ent of entries) {\n    if (!ent.isDirectory()) continue;\r\n    const p = path.join(results, ent.name, \"api_records.jsonl\");\r\n    try {\r\n      const stat = await fs.stat(p);\r\n      candidates.push({ path: p, mtime: stat.mtimeMs });\r\n    } catch {\r\n      // ignore\r\n    }\r\n  }\r\n  candidates.sort((a, b) => b.mtime - a.mtime);\r\n  return candidates.length ? candidates[0].path : null;\r\n}\r\n\r\nexport async function readJsonl(pathFile: string) {\n  const text = await fs.readFile(pathFile, \"utf-8\");\n  return text\n    .split(\"\\n\")\r\n    .map((line) => line.trim())\r\n    .filter(Boolean)\r\n    .map((line) => JSON.parse(line));\n}\n\nfunction repairMojibake(value: string) {\n  return value\n    .replace(/Ã§/g, \"ç\")\n    .replace(/Ã£/g, \"ã\")\n    .replace(/Ã¡/g, \"á\")\n    .replace(/Ã©/g, \"é\")\n    .replace(/Ãª/g, \"ê\")\n    .replace(/Ã­/g, \"í\")\n    .replace(/Ã³/g, \"ó\")\n    .replace(/Ã´/g, \"ô\")\n    .replace(/Ãº/g, \"ú\")\n    .replace(/Ã‰/g, \"É\")\n    .replace(/Ã“/g, \"Ó\")\n    .replace(/Ã/g, \"à\")\n    .replace(/Â/g, \"\");\n}\n\nfunction sanitizeEncoding<T>(input: T): T {\n  if (typeof input === \"string\") {\n    return repairMojibake(input) as T;\n  }\n  if (Array.isArray(input)) {\n    return input.map((item) => sanitizeEncoding(item)) as T;\n  }\n  if (input && typeof input === \"object\") {\n    const out: Record<string, unknown> = {};\n    for (const [k, v] of Object.entries(input as Record<string, unknown>)) {\n      out[k] = sanitizeEncoding(v);\n    }\n    return out as T;\n  }\n  return input;\n}\n\nexport type LatestRunInfo = {\n  runId: string;\n  snapshotPath: string;\n  summaryPath: string;\n  summary: Record<string, unknown>;\n};\n\nfunction isRunValid(summary: Record<string, unknown>) {\n  const status = String(summary?.status || \"\").toLowerCase();\n  const gate = (summary?.deployment_gate || {}) as Record<string, unknown>;\n  const blocked = gate?.blocked === true;\n  return status === \"ok\" && !blocked;\n}\n\nexport async function findLatestValidRun(): Promise<LatestRunInfo | null> {\n  const { results } = dataDirs();\n  const snapshotsRoot = path.join(results, \"ops\", \"snapshots\");\n  let runDirs: string[] = [];\n  try {\n    runDirs = (await fs.readdir(snapshotsRoot, { withFileTypes: true }))\n      .filter((ent) => ent.isDirectory())\n      .map((ent) => ent.name)\n      .sort()\n      .reverse();\n  } catch {\n    return null;\n  }\n\n  for (const runId of runDirs) {\n    const summaryPath = path.join(snapshotsRoot, runId, \"summary.json\");\n    const snapshotPath = path.join(snapshotsRoot, runId, \"api_snapshot.jsonl\");\n    try {\n      const [summaryText, snapshotStat] = await Promise.all([fs.readFile(summaryPath, \"utf-8\"), fs.stat(snapshotPath)]);\n      if (!snapshotStat.size) continue;\n      const summary = JSON.parse(summaryText) as Record<string, unknown>;\n      if (!isRunValid(summary)) continue;\n      return { runId, summaryPath, snapshotPath, summary };\n    } catch {\n      // ignore invalid run and keep scanning older runs\n    }\n  }\n  return null;\n}\n\nexport async function readLatestSnapshot() {\n  const run = await findLatestValidRun();\n  if (!run) return null;\n  const records = await readJsonl(run.snapshotPath);\n  return {\n    runId: run.runId,\n    summary: sanitizeEncoding(run.summary),\n    records: sanitizeEncoding(records),\n  };\n}\n\nexport async function readRiskTruthPanel() {\n  const { results } = dataDirs();\n  const target = path.join(results, \"validation\", \"risk_truth_panel.json\");\n  try {\n    const text = await fs.readFile(target, \"utf-8\");\n    return sanitizeEncoding(JSON.parse(text));\n  } catch {\n    return {\n      status: \"empty\",\n      counts: { assets: 0, validated: 0, watch: 0, inconclusive: 0 },\n      entries: [],\n    };\n  }\n}\n\nexport async function readGlobalVerdict() {\n  const { results } = dataDirs();\n  const target = path.join(results, \"validation\", \"VERDICT.json\");\n  try {\n    const text = await fs.readFile(target, \"utf-8\");\n    return sanitizeEncoding(JSON.parse(text));\n  } catch {\n    return { status: \"unknown\", gate_checks: {} };\n  }\n}\n\nexport async function readJsonlWithValidationGate(pathFile: string) {\n  const records = await readJsonl(pathFile);\n  let statusMap: Record<string, Record<string, string>> = {};\n  try {\n    statusMap = await readAssetStatusMap();\n  } catch {\n    return records;\n  }\n  return records.map((record) => {\n    const key = `${record.asset || \"\"}__${record.timeframe || \"\"}`;\n    const gate = statusMap[key];\n    if (!gate || (gate.status || \"\").toLowerCase() === \"validated\") {\n      return record;\n    }\n    const reason = gate.reason || \"gate_not_validated\";\n    const warnings = Array.isArray(record.warnings) ? [...record.warnings] : [];\n    if (!warnings.includes(\"INCONCLUSIVE_SIGNAL\")) {\n      warnings.push(\"INCONCLUSIVE_SIGNAL\");\n    }\n    return {\n      ...record,\n      signal_status: \"inconclusive\",\n      use_forecast_bool: false,\n      action: \"DIAGNOSTICO_INCONCLUSIVO\",\n      regime_label: \"INCONCLUSIVE\",\n      confidence_level: \"LOW\",\n      warnings,\n      gate_reason: reason,\n    };\n  });\n}\n\r\nexport async function readDashboardOverview() {\r\n  const { results } = dataDirs();\r\n  const overviewPath = path.join(results, \"dashboard\", \"overview.json\");\r\n  const text = await fs.readFile(overviewPath, \"utf-8\");\r\n  return JSON.parse(text);\r\n}\r\n","import { promises as fs } from \"fs\";\nimport path from \"path\";\n\nfunction repoRoot() {\n  return path.resolve(process.cwd(), \"..\");\n}\n\nexport function validatedRoot() {\n  return process.env.VALIDATED_DIR || path.join(repoRoot(), \"results\", \"validated\", \"latest\");\n}\n\nexport async function readValidatedUniverse(tf: string) {\n  const file = path.join(validatedRoot(), `universe_${tf}.json`);\n  const text = await fs.readFile(file, \"utf-8\");\n  return JSON.parse(text);\n}\n\nexport async function readAssetStatusMap() {\n  const file = path.join(validatedRoot(), \"asset_status.csv\");\n  const text = await fs.readFile(file, \"utf-8\");\n  const lines = text.trim().split(\"\\n\");\n  const header = (lines.shift() || \"\").split(\",\").map((h) => h.trim());\n  const out: Record<string, Record<string, string>> = {};\n  for (const line of lines) {\n    const parts = line.split(\",\");\n    const row: Record<string, string> = {};\n    header.forEach((h, i) => {\n      row[h] = (parts[i] || \"\").trim();\n    });\n    const key = `${row.asset}__${row.timeframe}`;\n    out[key] = row;\n  }\n  return out;\n}\n","export type SourceLevel = \"A\" | \"B\" | \"C\";\n\nexport type CaseSource = {\n  title: string;\n  url: string;\n  level: SourceLevel;\n  type: \"primary\" | \"secondary\";\n};\n\nexport type StoryCase = {\n  id: string;\n  domain: \"finance\" | \"macro\" | \"realestate\";\n  title: string;\n  period: string;\n  why_matters: string;\n  what_happened: string;\n  motor_reading: string;\n  operational_use: string;\n  risk_limit: string;\n  image_hint: string;\n  sources: CaseSource[];\n};\n\nexport const STORY_CASES: StoryCase[] = [\n  {\n    id: \"yen-carry-2024\",\n    domain: \"finance\",\n    title: \"Yen carry unwind e explosao de volatilidade\",\n    period: \"2024-08\",\n    why_matters:\n      \"Liquidez some rapido em estruturas alavancadas. O risco principal nao e direcao de preco, e regime de fragilidade.\",\n    what_happened:\n      \"A compressao de diferencial de juros entre EUA e Japao forca desalavancagem. O VIX salta e a estrutura de opcao perde estabilidade.\",\n    motor_reading:\n      \"O motor trata como transicao de regime com queda de confianca local, aumento de instabilidade e elevacao de alertas.\",\n    operational_use:\n      \"Uso pratico: reduzir exposicao bruta, bloquear novos riscos e acionar hedge condicional por regime.\",\n    risk_limit:\n      \"Nao e previsao de candle. E radar de contexto para controle de risco e de alavancagem.\",\n    image_hint: \"Mesa de risco, tela de volatilidade e fluxo de opcao em stress.\",\n    sources: [\n      {\n        title: \"BIS - Anatomy of the VIX spike in August 2024\",\n        url: \"https://www.bis.org/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"Euronext - Market quality and volatility shock\",\n        url: \"https://www.euronext.com/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"Wellington - Yen carry unwind\",\n        url: \"https://www.wellington.com/\",\n        level: \"B\",\n        type: \"secondary\",\n      },\n    ],\n  },\n  {\n    id: \"tariff-shock-2025\",\n    domain: \"macro\",\n    title: \"Choque tarifario e quebra de regime de comercio\",\n    period: \"2025-04\",\n    why_matters:\n      \"Mudanca regulatoria abrupta desloca o equilibrio macro e contamina equities, FX e cadeia global.\",\n    what_happened:\n      \"Tarifas amplas elevam incerteza de custo, comprimem margem e aumentam dispersao setorial em poucos dias.\",\n    motor_reading:\n      \"Regime sai de estabilidade para transicao/instavel com persistencia maior de alertas e menor qualidade de sinal.\",\n    operational_use:\n      \"Uso pratico: mover para postura defensiva por dominio, limitar risco direcional e priorizar setores resilientes.\",\n    risk_limit:\n      \"Motor nao explica geopolitica; ele mede efeito no estado do sistema.\",\n    image_hint: \"Portos, containers e curva de volatilidade em tela unica.\",\n    sources: [\n      {\n        title: \"IMF - Red Sea attacks and global trade disruption\",\n        url: \"https://www.imf.org/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"Congress - Economic effects and fiscal stress\",\n        url: \"https://www.congress.gov/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"McKinsey - Supply chain risk pulse 2025\",\n        url: \"https://www.mckinsey.com/\",\n        level: \"B\",\n        type: \"secondary\",\n      },\n    ],\n  },\n  {\n    id: \"cre-maturity-wall\",\n    domain: \"realestate\",\n    title: \"Maturity wall no real estate comercial\",\n    period: \"2025-2026\",\n    why_matters:\n      \"Crise lenta de refinanciamento causa erosao de capital sem crash unico visivel.\",\n    what_happened:\n      \"Vencimento de divida em ambiente de juros altos gera bifurcacao de credito e queda de liquidez de ativos.\",\n    motor_reading:\n      \"Sinais de transicao longa com qualidade heterogenea entre regioes e maior tempo em estado de cautela.\",\n    operational_use:\n      \"Uso pratico: congelar alocacao agressiva, revisar duration e exigir evidencia adicional antes de expandir risco.\",\n    risk_limit:\n      \"Motor identifica fragilidade de regime; nao substitui due diligence de ativo individual.\",\n    image_hint: \"Skyline corporativo com vacancia e curva de credito em stress.\",\n    sources: [\n      {\n        title: \"Congress - Commercial Real Estate and the Banking Sector\",\n        url: \"https://www.congress.gov/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"MBA - Commercial/Multifamily Research\",\n        url: \"https://www.mba.org/\",\n        level: \"A\",\n        type: \"primary\",\n      },\n      {\n        title: \"NAIOP - Challenges facing CRE in 2025\",\n        url: \"https://www.naiop.org/\",\n        level: \"B\",\n        type: \"secondary\",\n      },\n    ],\n  },\n];\n\nexport const DOMAIN_LABELS: Record<StoryCase[\"domain\"], string> = {\n  finance: \"Finance / Trading\",\n  macro: \"Macro / Operacoes\",\n  realestate: \"Imobiliario\",\n};\r\n","import { DOMAIN_LABELS, STORY_CASES } from \"@/lib/story/cases\";\nimport { readLatestSnapshot, readRiskTruthPanel } from \"@/lib/server/data\";\n\ntype Domain = \"finance\" | \"macro\" | \"realestate\";\n\nfunction domainCount(entries: Record<string, unknown>[], domain: Domain) {\n  return entries.filter((entry) => {\n    const asset = String(entry.asset_id || \"\");\n    const row = String(entry.domain || \"\");\n    if (row) return row === domain;\n    if (domain === \"finance\") return asset.includes(\"USD\") || asset.includes(\"SPY\") || asset.includes(\"QQQ\");\n    if (domain === \"realestate\") return asset.includes(\"FIPEZAP\") || asset.includes(\"IMOB\");\n    if (domain === \"macro\") return asset.includes(\"DGS\") || asset.includes(\"DX\");\n    return false;\n  }).length;\n}\n\nexport default async function CasosPage() {\n  const [snap, panel] = await Promise.all([readLatestSnapshot(), readRiskTruthPanel()]);\n  const entries = Array.isArray(panel?.entries) ? (panel.entries as Record<string, unknown>[]) : [];\n\n  return (\n    <div className=\"p-5 md:p-6 lg:p-8 space-y-6\">\n      <section className=\"rounded-2xl border border-zinc-800 bg-zinc-950/50 p-5\">\n        <p className=\"text-xs tracking-[0.14em] uppercase text-zinc-500\">Nivel 1 - Storyline</p>\n        <h1 className=\"mt-2 text-2xl md:text-3xl font-semibold text-zinc-100\">Casos reais de transição de regime</h1>\n        <p className=\"mt-3 text-sm text-zinc-300\">\n          Esta pagina mostra uso operacional do motor como radar de risco. Os textos sao narrativos, mas o status exibido\n          vem do run valido mais recente e do painel de verdade de risco.\n        </p>\n        <div className=\"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm\">\n          {([\"finance\", \"macro\", \"realestate\"] as Domain[]).map((domain) => (\n            <div key={domain} className=\"rounded-xl border border-zinc-800 bg-black/30 p-3\">\n              <div className=\"text-zinc-400\">{DOMAIN_LABELS[domain]}</div>\n              <div className=\"text-xl font-semibold mt-1\">{domainCount(entries, domain)}</div>\n              <div className=\"text-xs text-zinc-500 mt-1\">ativos com classificação no painel</div>\n            </div>\n          ))}\n        </div>\n        <div className=\"mt-4 text-xs text-zinc-500\">run_id: {snap?.runId || \"indisponivel\"}</div>\n      </section>\n\n      <section className=\"space-y-4\">\n        {STORY_CASES.map((item) => (\n          <article key={item.id} className=\"rounded-2xl border border-zinc-800 bg-zinc-950/45 p-5\">\n            <div className=\"flex flex-wrap items-center gap-2 text-xs\">\n              <span className=\"rounded-full border border-zinc-700 px-2 py-1 text-zinc-300\">{DOMAIN_LABELS[item.domain]}</span>\n              <span className=\"rounded-full border border-zinc-700 px-2 py-1 text-zinc-400\">{item.period}</span>\n            </div>\n            <h2 className=\"mt-3 text-lg md:text-xl font-semibold text-zinc-100\">{item.title}</h2>\n            <div className=\"mt-3 space-y-2 text-sm text-zinc-300\">\n              <p><span className=\"text-zinc-400\">Contexto:</span> {item.why_matters}</p>\n              <p><span className=\"text-zinc-400\">Evento:</span> {item.what_happened}</p>\n              <p><span className=\"text-zinc-400\">Leitura do motor:</span> {item.motor_reading}</p>\n              <p><span className=\"text-zinc-400\">Uso pratico:</span> {item.operational_use}</p>\n              <p><span className=\"text-zinc-400\">Limite:</span> {item.risk_limit}</p>\n            </div>\n            <div className=\"mt-4\">\n              <h3 className=\"text-xs tracking-[0.12em] uppercase text-zinc-500\">Fontes</h3>\n              <ul className=\"mt-2 space-y-1 text-sm\">\n                {item.sources.map((src) => (\n                  <li key={`${item.id}-${src.url}`} className=\"text-zinc-300\">\n                    [{src.level}] {src.title} -{\" \"}\n                    <a className=\"text-emerald-300 hover:text-emerald-200 underline underline-offset-2\" href={src.url} target=\"_blank\" rel=\"noreferrer\">\n                      link\n                    </a>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </article>\n        ))}\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}