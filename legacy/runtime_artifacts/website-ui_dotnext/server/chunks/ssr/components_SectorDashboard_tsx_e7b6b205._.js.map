{"version":3,"sources":["../../../../components/SectorDashboard.tsx","../../../../components/DashboardFilters.tsx","../../../../components/RegimeChart.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport DashboardFilters from \"@/components/DashboardFilters\";\nimport RegimeChart from \"@/components/RegimeChart\";\n\ntype SeriesPoint = {\n  date: string;\n  price: number | null;\n  confidence: number;\n  regime: string;\n};\n\ntype UniverseAsset = {\n  asset: string;\n  group?: string;\n  domain?: string;\n  state?: { label?: string };\n  metrics?: { confidence?: number; quality?: number };\n  validation?: { status?: string; reasons?: string[] };\n  confidence?: number;\n  quality?: number;\n  signal_status?: string;\n  reason?: string;\n  risk_truth_status?: string;\n};\n\ntype ForecastPoint = {\n  y_pred?: number;\n};\n\nconst regimeColor: Record<string, string> = {\n  STABLE: \"text-emerald-300\",\n  TRANSITION: \"text-amber-300\",\n  UNSTABLE: \"text-rose-300\",\n  INCONCLUSIVE: \"text-zinc-400\",\n};\n\nconst groupLabels: Record<string, string> = {\n  crypto: \"Cripto\",\n  volatility: \"Volatilidade\",\n  commodities_broad: \"Commodities\",\n  energy: \"Energia\",\n  metals: \"Metais\",\n  bonds_rates: \"Juros/Bonds\",\n  fx: \"Moedas\",\n  equities_us_broad: \"Equities US Broad\",\n  equities_us_sectors: \"Equities US Setores\",\n  equities_international: \"Equities Internacionais\",\n  realestate: \"Imobiliário\",\n};\n\nfunction cleanRegime(label?: string) {\n  if (!label) return \"TRANSITION\";\n  if (label === \"NOISY\") return \"UNSTABLE\";\n  if (label === \"STABLE\" || label === \"TRANSITION\" || label === \"UNSTABLE\" || label === \"INCONCLUSIVE\") return label;\n  return \"TRANSITION\";\n}\n\nfunction mean(nums: number[]) {\n  if (!nums.length) return 0;\n  return nums.reduce((a, b) => a + b, 0) / nums.length;\n}\n\nexport default function SectorDashboard({\n  title,\n  showTable = true,\n  initialDomain = \"finance\",\n}: {\n  title: string;\n  showTable?: boolean;\n  initialDomain?: \"finance\" | \"energy\" | \"realestate\";\n}) {\n  const [timeframe, setTimeframe] = useState(\"daily\");\n  const [sector, setSector] = useState(initialDomain);\n  const [statusTab, setStatusTab] = useState<\"validated\" | \"watch\" | \"inconclusive\">(\"validated\");\n  const [showInconclusive, setShowInconclusive] = useState(false);\n  const [rangePreset, setRangePreset] = useState(\"180d\");\n  const [normalize, setNormalize] = useState(false);\n  const [showRegimeBands, setShowRegimeBands] = useState(true);\n  const [smoothing, setSmoothing] = useState<\"none\" | \"ema_short\" | \"ema_long\">(\"none\");\n  const [summaryHorizon, setSummaryHorizon] = useState<1 | 5 | 10>(5);\n\n  const [universe, setUniverse] = useState<UniverseAsset[]>([]);\n  const [selected, setSelected] = useState<string[]>([]);\n  const [seriesByAsset, setSeriesByAsset] = useState<Record<string, SeriesPoint[]>>({});\n  const [forecastByAsset, setForecastByAsset] = useState<Record<string, Record<number, ForecastPoint | null>>>({});\n  const [loading, setLoading] = useState(false);\n  const [runMeta, setRunMeta] = useState<{ run_id?: string; global_verdict_status?: string } | null>(null);\n  const [runSummary, setRunSummary] = useState<Record<string, unknown> | null>(null);\n  const [riskTruthCounts, setRiskTruthCounts] = useState<Record<string, number> | null>(null);\n\n  useEffect(() => {\n    const loadUniverse = async () => {\n      const statuses = statusTab === \"inconclusive\" ? \"inconclusive\" : \"validated,watch\";\n      const includeInconclusive = showInconclusive || statusTab === \"inconclusive\" ? 1 : 0;\n      const [runRes, riskRes, assetsRes] = await Promise.all([\n        fetch(\"/api/run/latest\"),\n        fetch(\"/api/risk-truth\"),\n        fetch(\n          `/api/assets?domain=${encodeURIComponent(sector)}&status=${encodeURIComponent(\n            statuses\n          )}&include_inconclusive=${includeInconclusive}`\n        ),\n      ]);\n\n      if (runRes.ok) {\n        const runJson = await runRes.json();\n        setRunMeta({ run_id: runJson?.run_id, global_verdict_status: runJson?.global_verdict_status });\n        setRunSummary((runJson?.summary as Record<string, unknown>) || null);\n      } else {\n        setRunMeta(null);\n        setRunSummary(null);\n      }\n\n      if (riskRes.ok) {\n        const riskJson = await riskRes.json();\n        setRiskTruthCounts((riskJson?.counts as Record<string, number>) || null);\n      } else {\n        setRiskTruthCounts(null);\n      }\n\n      const assetsJson = await assetsRes.json();\n      const data = assetsJson?.records;\n      if (!Array.isArray(data)) {\n        setUniverse([]);\n        setSelected([]);\n        return;\n      }\n      setUniverse(data);\n      setSelected((prev) => {\n        const approved = data.filter((u: UniverseAsset) => (u.risk_truth_status || \"validated\") === \"validated\");\n        const preferred = approved.length ? approved : data;\n        const valid = prev.filter((a) => preferred.find((u: UniverseAsset) => u.asset === a));\n        return valid.length ? valid : preferred.slice(0, 4).map((u: UniverseAsset) => u.asset);\n      });\n    };\n    loadUniverse();\n  }, [timeframe, sector, statusTab, showInconclusive]);\n\n  useEffect(() => {\n    if (!universe.length) return;\n    const scoped = universe.map((u) => u.asset);\n    setSelected((prev) => {\n      const kept = prev.filter((a) => scoped.includes(a));\n      if (kept.length) return kept;\n      return scoped.slice(0, 6);\n    });\n  }, [universe]);\n\n  useEffect(() => {\n    const loadSeries = async () => {\n      if (!selected.length) {\n        setSeriesByAsset({});\n        return;\n      }\n      setLoading(true);\n      try {\n        const seriesRes = await fetch(`/api/graph/series-batch?assets=${selected.join(\",\")}&tf=${timeframe}&limit=2000`);\n        const seriesJson = await seriesRes.json();\n        setSeriesByAsset(seriesJson || {});\n\n        const forecasts: Record<string, Record<number, ForecastPoint | null>> = {};\n        await Promise.all(\n          selected.map(async (asset) => {\n            forecasts[asset] = { 1: null, 5: null, 10: null };\n            try {\n              await Promise.all(\n                [1, 5, 10].map(async (h) => {\n                  try {\n                    const f = await fetch(`/api/files/forecast_suite/${asset}/${timeframe}/${asset}_${timeframe}_log_return_h${h}.json`);\n                    if (!f.ok) {\n                      forecasts[asset][h] = null;\n                      return;\n                    }\n                    const j = await f.json();\n                    const preds = Array.isArray(j?.predictions) ? j.predictions : [];\n                    forecasts[asset][h] = preds.length ? preds[preds.length - 1] : null;\n                  } catch {\n                    forecasts[asset][h] = null;\n                  }\n                })\n              );\n            } catch {\n              forecasts[asset] = { 1: null, 5: null, 10: null };\n            }\n          })\n        );\n        setForecastByAsset(forecasts);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadSeries();\n  }, [selected, timeframe]);\n\n  const metrics = useMemo(() => {\n    const activeSeries = selected.flatMap((a) => seriesByAsset[a] || []);\n    const lastPoints = selected.map((a) => (seriesByAsset[a] || [])[Math.max(0, (seriesByAsset[a] || []).length - 1)]).filter(Boolean) as SeriesPoint[];\n    const avgConf = mean(lastPoints.map((p) => p.confidence || 0));\n    const unstableCount = lastPoints.filter((p) => cleanRegime(p.regime) === \"UNSTABLE\").length;\n    const dominantRegime = (() => {\n      const counts: Record<string, number> = {};\n      lastPoints.forEach((p) => {\n        const r = cleanRegime(p.regime);\n        counts[r] = (counts[r] || 0) + 1;\n      });\n      return Object.entries(counts).sort((a, b) => b[1] - a[1])[0]?.[0] || \"TRANSITION\";\n    })();\n    return {\n      state: dominantRegime,\n      confidence: avgConf,\n      quality: Math.max(0, Math.min(1, avgConf * 0.9)),\n      alerts: unstableCount,\n      sampleSize: activeSeries.length,\n    };\n  }, [selected, seriesByAsset]);\n\n  const tableRows = useMemo(() => {\n    return selected.map((asset) => {\n      const series = seriesByAsset[asset] || [];\n      const last = series[series.length - 1];\n      const first = series[0];\n      const conf = last?.confidence ?? 0;\n      const regime = cleanRegime(last?.regime);\n      const rowMeta = universe.find((u) => u.asset === asset);\n      const vStatus = rowMeta?.risk_truth_status || rowMeta?.signal_status || \"validated\";\n      const vReason = rowMeta?.reason || \"\";\n      const ret = forecastByAsset[asset]?.[summaryHorizon]?.y_pred;\n      const lastRegimeIdx = series.length - 1;\n      let streak = 0;\n      for (let i = lastRegimeIdx; i >= 0; i -= 1) {\n        if (cleanRegime(series[i]?.regime) === regime) streak += 1;\n        else break;\n      }\n      const regimeDurationDays = timeframe === \"weekly\" ? streak * 7 : streak;\n      let action = \"Aguardar\";\n      if (regime === \"STABLE\" && conf >= 0.6) action = \"Aplicar\";\n      if (regime === \"UNSTABLE\" || conf < 0.45) action = \"Nao operar\";\n      if (vStatus !== \"validated\") action = \"Diagnóstico inconclusivo\";\n      return {\n        asset,\n        group: groupLabels[rowMeta?.group || \"\"] || rowMeta?.group || \"\",\n        regime: vStatus !== \"validated\" ? \"INCONCLUSIVE\" : regime,\n        confidence: conf,\n        quality: rowMeta?.quality ?? rowMeta?.metrics?.quality,\n        period: first && last ? `${first.date} -> ${last.date}` : \"--\",\n        regimeDurationDays,\n        price: last?.price,\n        forecast: ret,\n        action,\n        validationStatus: vStatus,\n        validationReason: vReason,\n      };\n    });\n  }, [selected, seriesByAsset, forecastByAsset, universe, summaryHorizon, timeframe]);\n\n  return (\n    <div className=\"p-4 md:p-5 space-y-4 md:space-y-5\">\n      <div className=\"space-y-2\">\n        <div className=\"text-xs uppercase tracking-[0.2em] text-zinc-400\">{title}</div>\n        <h1 className=\"text-2xl font-semibold\">Regimes por setor com projeção integrada</h1>\n        <p className=\"text-sm text-zinc-400\">Leitura estrutural do mercado com confiança e forecast condicional.</p>\n        {runMeta?.global_verdict_status && String(runMeta.global_verdict_status).toLowerCase() !== \"pass\" ? (\n          <div className=\"rounded-lg border border-rose-500/40 bg-rose-950/40 px-3 py-2 text-xs text-rose-200\">\n            Global gate FAIL: sinais não acionáveis.\n          </div>\n        ) : null}\n        {runSummary && (runSummary?.deployment_gate as Record<string, unknown> | undefined)?.blocked === true ? (\n          <div className=\"rounded-lg border border-amber-500/40 bg-amber-950/40 px-3 py-2 text-xs text-amber-200\">\n            Deployment gate BLOCKED: exibindo dados em modo diagnóstico.\n          </div>\n        ) : null}\n        <div className=\"flex flex-wrap gap-2 text-xs text-zinc-400\">\n          <span>Run: {runMeta?.run_id || \"--\"}</span>\n          <span>Validados: {riskTruthCounts?.validated ?? \"--\"}</span>\n          <span>Watch: {riskTruthCounts?.watch ?? \"--\"}</span>\n          <span>Inconclusivos: {riskTruthCounts?.inconclusive ?? \"--\"}</span>\n        </div>\n        <div className=\"flex flex-wrap items-center gap-2 text-xs\">\n          {([\"validated\", \"watch\", \"inconclusive\"] as const).map((k) => (\n            <button\n              key={k}\n              onClick={() => setStatusTab(k)}\n              className={`rounded-md border px-2 py-1 ${\n                statusTab === k ? \"border-cyan-400 text-cyan-300\" : \"border-zinc-700 text-zinc-400\"\n              }`}\n            >\n              {k}\n            </button>\n          ))}\n          <label className=\"ml-2 inline-flex items-center gap-2 text-zinc-400\">\n            <input\n              type=\"checkbox\"\n              checked={showInconclusive}\n              onChange={(e) => setShowInconclusive(e.target.checked)}\n              className=\"h-3 w-3 accent-cyan-400\"\n            />\n            Mostrar inconclusivos\n          </label>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\n        <Card label=\"Estado\" value={metrics.state} tone={metrics.state} />\n        <Card label=\"Confiança\" value={`${(metrics.confidence * 100).toFixed(1)}%`} />\n        <Card label=\"Qualidade\" value={`${(metrics.quality * 100).toFixed(1)}%`} />\n        <Card label=\"Alertas\" value={String(metrics.alerts)} />\n      </div>\n\n      <div className=\"rounded-2xl border border-zinc-800 bg-zinc-950/60 p-4 md:p-5 space-y-4\">\n        <DashboardFilters\n          assets={universe}\n          selected={selected}\n          onSelectedChange={setSelected}\n          sector={sector}\n          onSectorChange={(value: string) => setSector(value as \"finance\" | \"energy\" | \"realestate\")}\n          sectors={[\n            { value: \"finance\", label: \"Finance / Trading\" },\n            { value: \"energy\", label: \"Macro / Operacoes\" },\n            { value: \"realestate\", label: \"Imobiliário\" },\n          ]}\n          timeframe={timeframe}\n          onTimeframeChange={setTimeframe}\n          rangePreset={rangePreset}\n          onRangePresetChange={setRangePreset}\n          normalize={normalize}\n          onNormalizeChange={setNormalize}\n          showRegimeBands={showRegimeBands}\n          onShowRegimeBandsChange={setShowRegimeBands}\n          smoothing={smoothing}\n          onSmoothingChange={setSmoothing}\n        />\n\n        {loading ? <div className=\"text-sm text-zinc-500\">Carregando series...</div> : null}\n\n        <RegimeChart\n          data={seriesByAsset}\n          selected={selected}\n          normalize={normalize}\n          showRegimeBands={showRegimeBands}\n          smoothing={smoothing}\n          rangePreset={rangePreset}\n        />\n      </div>\n\n      {showTable ? (\n        <div className=\"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-4 md:gap-5\">\n          <div className=\"rounded-2xl border border-zinc-800 bg-zinc-950/60 p-4 md:p-5\">\n            <div className=\"text-sm uppercase tracking-widest text-zinc-400\">Tabela por ativo</div>\n            <div className=\"mt-3 overflow-auto\">\n              <table className=\"w-full text-xs\">\n                <thead className=\"text-zinc-500 uppercase\">\n                  <tr>\n                    <th className=\"text-left py-2\">Ativo</th>\n                    <th className=\"text-left py-2\">Setor</th>\n                    <th className=\"text-left py-2\">Periodo</th>\n                    <th className=\"text-left py-2\">Regime</th>\n                    <th className=\"text-left py-2\">Duração</th>\n                    <th className=\"text-left py-2\">Conf.</th>\n                    <th className=\"text-left py-2\">Qual.</th>\n                    <th className=\"text-left py-2\">Preco</th>\n                    <th className=\"text-left py-2\">Proj. h{summaryHorizon}</th>\n                    <th className=\"text-left py-2\">Acao</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {tableRows.map((r) => (\n                    <tr key={r.asset} className=\"border-t border-zinc-800/70 text-zinc-300\">\n                      <td className=\"py-2\">{r.asset}</td>\n                      <td className=\"py-2 text-zinc-400\">{r.group || \"-\"}</td>\n                      <td className=\"py-2 text-zinc-400\">{r.period}</td>\n                      <td className={`py-2 ${regimeColor[r.regime] || \"text-zinc-300\"}`}>{r.regime}</td>\n                      <td className=\"py-2 text-zinc-400\">{r.regimeDurationDays}d</td>\n                      <td className=\"py-2\">{(r.confidence * 100).toFixed(1)}%</td>\n                      <td className=\"py-2\">{r.quality != null ? `${(r.quality * 100).toFixed(1)}%` : \"--\"}</td>\n                      <td className=\"py-2\">{r.price != null ? r.price.toFixed(2) : \"--\"}</td>\n                      <td className=\"py-2\">{r.forecast != null ? `${(r.forecast * 100).toFixed(2)}%` : \"--\"}</td>\n                      <td className=\"py-2\" title={r.validationReason || \"\"}>{r.action}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div className=\"rounded-2xl border border-zinc-800 bg-zinc-950/60 p-4 md:p-5 space-y-3\">\n            <div className=\"text-sm uppercase tracking-widest text-zinc-400\">Resumo</div>\n            <div className=\"flex items-center gap-2 text-xs\">\n              <span className=\"text-zinc-400\">Horizonte:</span>\n              {[1, 5, 10].map((h) => (\n                <button\n                  key={h}\n                  className={`rounded-md border px-2 py-1 ${summaryHorizon === h ? \"border-cyan-400 text-cyan-300\" : \"border-zinc-700 text-zinc-300\"}`}\n                  onClick={() => setSummaryHorizon(h as 1 | 5 | 10)}\n                >\n                  h{h}\n                </button>\n              ))}\n            </div>\n            <div className=\"text-xs text-zinc-300\">Amostras no chart: {metrics.sampleSize}</div>\n            <div className=\"text-xs text-zinc-300\">Ativos selecionados: {selected.length}</div>\n            <div className=\"text-xs text-zinc-300\">Regime dominante: {metrics.state}</div>\n            <div className=\"text-xs text-zinc-300\">Confiança média: {(metrics.confidence * 100).toFixed(1)}%</div>\n            {tableRows.slice(0, 3).map((r) => (\n              <div key={r.asset} className=\"rounded-lg border border-zinc-800 p-2 text-xs\">\n                <div className=\"font-medium text-zinc-200\">{r.asset}</div>\n                <div className=\"text-zinc-400\">{r.period}</div>\n                <div className=\"text-zinc-300\">\n                  {r.regime} por ~{r.regimeDurationDays}d • h{summaryHorizon}: {r.forecast != null ? `${(r.forecast * 100).toFixed(2)}%` : \"--\"}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nfunction Card({ label, value, tone }: { label: string; value: string; tone?: string }) {\n  const color = tone === \"STABLE\" ? \"text-emerald-300\" : tone === \"UNSTABLE\" ? \"text-rose-300\" : tone === \"TRANSITION\" ? \"text-amber-300\" : \"text-zinc-100\";\n  return (\n    <div className=\"rounded-xl border border-zinc-800 bg-zinc-950/70 p-3 md:p-4\">\n      <div className=\"text-[11px] uppercase tracking-[0.2em] text-zinc-500\">{label}</div>\n      <div className={`mt-1 text-lg md:text-xl font-semibold ${color}`}>{value}</div>\n    </div>\n  );\n}\r\n","\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\ntype UniverseAsset = {\n  asset: string;\n  group?: string;\n};\n\ntype Props = {\n  assets: UniverseAsset[];\n  selected: string[];\n  onSelectedChange: (assets: string[]) => void;\n  sector: string;\n  onSectorChange: (value: string) => void;\n  timeframe: string;\n  onTimeframeChange: (value: string) => void;\n  rangePreset: string;\n  onRangePresetChange: (value: string) => void;\n  normalize: boolean;\n  onNormalizeChange: (value: boolean) => void;\n  showRegimeBands: boolean;\n  onShowRegimeBandsChange: (value: boolean) => void;\n  smoothing: \"none\" | \"ema_short\" | \"ema_long\";\n  onSmoothingChange: (value: \"none\" | \"ema_short\" | \"ema_long\") => void;\n  sectors?: Array<{ value: string; label: string }>;\n};\n\nconst groupLabels: Record<string, string> = {\n  crypto: \"Cripto\",\n  volatility: \"Volatilidade\",\n  commodities_broad: \"Commodities\",\n  energy: \"Energia\",\n  metals: \"Metais\",\n  bonds_rates: \"Juros/Bonds\",\n  fx: \"Moedas\",\n  equities_us_broad: \"Equities US Broad\",\n  equities_us_sectors: \"Equities US Setores\",\n  equities_international: \"Equities Internacionais\",\n  realestate: \"Imobiliário\",\n};\n\nexport default function DashboardFilters(props: Props) {\n  const {\n    assets,\n    selected,\n    onSelectedChange,\n    sector,\n    onSectorChange,\n    timeframe,\n    onTimeframeChange,\n    rangePreset,\n    onRangePresetChange,\n    normalize,\n    onNormalizeChange,\n    showRegimeBands,\n    onShowRegimeBandsChange,\n    smoothing,\n    onSmoothingChange,\n    sectors,\n  } = props;\n\n  const [query, setQuery] = useState(\"\");\n  const [open, setOpen] = useState(false);\n\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return assets\n      .filter((a) => (sectors && sectors.length ? true : sector === \"all\" || (a.group || \"\") === sector))\n      .filter((a) => !q || a.asset.toLowerCase().includes(q) || (a.group || \"\").toLowerCase().includes(q))\n      .slice(0, 100);\n  }, [assets, query, sector, sectors]);\n\n  const sectorsFromAssets = useMemo(() => {\n    const set = new Set<string>();\n    assets.forEach((a) => {\n      if (a.group) set.add(a.group);\n    });\n    return [\"all\", ...Array.from(set).sort()];\n  }, [assets]);\n\n  const toggleAsset = (asset: string) => {\n    if (selected.includes(asset)) {\n      onSelectedChange(selected.filter((a) => a !== asset));\n      return;\n    }\n    if (selected.length >= 12) return;\n    onSelectedChange([...selected, asset]);\n  };\n\n  return (\n    <div className=\"sticky top-2 z-20 rounded-xl border border-zinc-800 bg-zinc-950/95 p-4 md:p-5 backdrop-blur-sm\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-7 gap-3\">\n        <div className=\"xl:col-span-2 relative\">\n          <button\n            className=\"w-full rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-left text-sm\"\n            onClick={() => setOpen((v) => !v)}\n            title=\"Selecionar ativos\"\n          >\n            {selected.length ? `${selected.length} ativos selecionados` : \"Selecionar ativos\"}\n          </button>\n          {open ? (\n            <div className=\"absolute mt-2 w-full max-h-72 overflow-auto rounded-lg border border-zinc-700 bg-zinc-950 p-2 shadow-xl\">\n              <input\n                className=\"mb-2 w-full rounded border border-zinc-700 bg-zinc-900 px-2 py-1.5 text-xs\"\n                placeholder=\"Buscar ativo\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n              />\n              <div className=\"space-y-1\">\n                {filtered.map((a) => (\n                  <label key={a.asset} className=\"flex items-center gap-2 rounded px-1 py-1 text-xs hover:bg-zinc-900\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selected.includes(a.asset)}\n                      onChange={() => toggleAsset(a.asset)}\n                      className=\"h-3 w-3 accent-cyan-400\"\n                    />\n                    <span className=\"font-medium\">{a.asset}</span>\n                    <span className=\"text-zinc-500\">{groupLabels[a.group || \"\"] || a.group || \"\"}</span>\n                  </label>\n                ))}\n              </div>\n            </div>\n          ) : null}\n        </div>\n\n        <select\n          value={sector}\n          onChange={(e) => onSectorChange(e.target.value)}\n          className=\"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm\"\n          title=\"Filtrar por setor\"\n        >\n          {(sectors && sectors.length ? sectors : sectorsFromAssets.map((s) => ({ value: s, label: s === \"all\" ? \"Todos os setores\" : groupLabels[s] || s }))).map((s) => (\n            <option key={s.value} value={s.value}>\n              {s.label}\n            </option>\n          ))}\n        </select>\n\n        <select\n          value={timeframe}\n          onChange={(e) => onTimeframeChange(e.target.value)}\n          className=\"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm\"\n        >\n          <option value=\"daily\">Diario</option>\n          <option value=\"weekly\">Semanal</option>\n        </select>\n\n        <select\n          value={rangePreset}\n          onChange={(e) => onRangePresetChange(e.target.value)}\n          className=\"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm\"\n        >\n          <option value=\"30d\">Ultimos 30d</option>\n          <option value=\"90d\">Ultimos 90d</option>\n          <option value=\"180d\">Ultimos 180d</option>\n          <option value=\"1y\">Ultimo 1y</option>\n          <option value=\"all\">Tudo</option>\n        </select>\n\n        <select\n          value={smoothing}\n          onChange={(e) => onSmoothingChange(e.target.value as \"none\" | \"ema_short\" | \"ema_long\")}\n          className=\"rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm\"\n        >\n          <option value=\"none\">Suavização: none</option>\n          <option value=\"ema_short\">Suavização: EMA curto</option>\n          <option value=\"ema_long\">Suavização: EMA longo</option>\n        </select>\n\n        <button\n          className={`rounded-lg border px-3 py-2 text-sm ${normalize ? \"border-cyan-400 text-cyan-300\" : \"border-zinc-700\"}`}\n          onClick={() => onNormalizeChange(!normalize)}\n        >\n          {normalize ? \"Normalizar: ON\" : \"Normalizar: OFF\"}\n        </button>\n\n        <button\n          className={`rounded-lg border px-3 py-2 text-sm ${showRegimeBands ? \"border-cyan-400 text-cyan-300\" : \"border-zinc-700\"}`}\n          onClick={() => onShowRegimeBandsChange(!showRegimeBands)}\n        >\n          {showRegimeBands ? \"Bandas regime: ON\" : \"Bandas regime: OFF\"}\n        </button>\n      </div>\n    </div>\n  );\n}\r\n","\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\ntype Point = { date: string; price: number | null; confidence: number; regime: string };\ntype LegacyPoint = { t: number; confidence: number; regime: string };\n\ntype SeriesMap = Record<string, Point[]>;\n\ntype Props = {\n  data: SeriesMap | Point[] | LegacyPoint[];\n  selected?: string[];\n  normalize?: boolean;\n  showRegimeBands?: boolean;\n  smoothing?: \"none\" | \"ema_short\" | \"ema_long\";\n  rangePreset?: string;\n};\n\nconst regimeColors: Record<string, string> = {\n  STABLE: \"rgba(52,211,153,0.14)\",\n  TRANSITION: \"rgba(251,191,36,0.14)\",\n  UNSTABLE: \"rgba(251,113,133,0.14)\",\n};\n\nconst lineColors = [\"#38bdf8\", \"#22c55e\", \"#f97316\", \"#a855f7\", \"#facc15\", \"#14b8a6\", \"#f472b6\", \"#60a5fa\"];\n\nfunction formatDate(d: string) {\n  if (!d) return \"\";\n  const t = new Date(`${d}T00:00:00Z`);\n  const mm = String(t.getUTCMonth() + 1).padStart(2, \"0\");\n  const yy = String(t.getUTCFullYear()).slice(-2);\n  return `${mm}/${yy}`;\n}\n\nfunction formatValue(v: number) {\n  const a = Math.abs(v);\n  if (a >= 1_000_000) return `${(v / 1_000_000).toFixed(1)}M`;\n  if (a >= 1_000) return `${(v / 1_000).toFixed(1)}K`;\n  return v.toFixed(2);\n}\n\nfunction ema(values: number[], period: number) {\n  if (!values.length) return values;\n  const alpha = 2 / (period + 1);\n  const out = [values[0]];\n  for (let i = 1; i < values.length; i += 1) {\n    out.push(alpha * values[i] + (1 - alpha) * out[i - 1]);\n  }\n  return out;\n}\n\nfunction downsample<T>(arr: T[], max = 2000) {\n  if (arr.length <= max) return arr;\n  const step = Math.ceil(arr.length / max);\n  return arr.filter((_, idx) => idx % step === 0);\n}\n\nfunction rangeCount(preset: string) {\n  if (preset === \"30d\") return 30;\n  if (preset === \"90d\") return 90;\n  if (preset === \"180d\") return 180;\n  if (preset === \"1y\") return 252;\n  return 0;\n}\n\nexport default function RegimeChart(props: Props) {\n  const {\n    data,\n    selected = [],\n    normalize = false,\n    showRegimeBands = true,\n    smoothing = \"none\",\n    rangePreset = \"all\",\n  } = props;\n  const [hidden, setHidden] = useState<Record<string, boolean>>({});\n  const [hoverIndex, setHoverIndex] = useState<number | null>(null);\n\n  const prepared = useMemo(() => {\n    const normalizeLegacy = (arr: Array<Point | LegacyPoint>): Point[] =>\n      arr.map((p, i) => {\n        if (\"date\" in p) return p;\n        return {\n          date: String(p.t ?? i),\n          price: Number.isFinite(p.confidence) ? p.confidence : null,\n          confidence: p.confidence ?? 0,\n          regime: p.regime ?? \"TRANSITION\",\n        };\n      });\n\n    const dataMap: SeriesMap = Array.isArray(data)\n      ? { SERIES: normalizeLegacy(data) }\n      : data;\n    const baseSelection = selected.length ? selected : Object.keys(dataMap);\n    const active = baseSelection.filter((a) => !hidden[a] && (dataMap[a] || []).length);\n    if (!active.length) return null;\n\n    let commonLen = Math.min(...active.map((a) => dataMap[a].length));\n    const rc = rangeCount(rangePreset);\n    if (rc > 0) commonLen = Math.min(commonLen, rc);\n\n    const aligned = active.map((a) => ({\n      asset: a,\n      points: dataMap[a].slice(-commonLen),\n    }));\n\n    const sampled = aligned.map((s) => ({\n      asset: s.asset,\n      points: downsample(s.points, 1600),\n    }));\n\n    const series = sampled.map((s) => {\n      const prices = s.points.map((p) => (p.price == null ? NaN : p.price));\n      const base = prices.find((v) => Number.isFinite(v)) || 1;\n      const normalized = prices.map((v) => (Number.isFinite(v) ? (v / base) * 100 : NaN));\n      const source = normalize ? normalized : prices;\n      const smooth =\n        smoothing === \"ema_short\" ? ema(source as number[], 8) : smoothing === \"ema_long\" ? ema(source as number[], 20) : source;\n      return {\n        asset: s.asset,\n        points: s.points,\n        values: smooth,\n      };\n    });\n\n    const allValues = series.flatMap((s) => s.values).filter((v) => Number.isFinite(v)) as number[];\n    if (!allValues.length) return null;\n\n    const ymin = Math.min(...allValues);\n    const ymax = Math.max(...allValues);\n\n    return {\n      series,\n      ymin,\n      ymax,\n      count: series[0].values.length,\n      focus: series[0].points,\n    };\n  }, [data, selected, normalize, smoothing, hidden, rangePreset]);\n\n  const width = 1200;\n  const height = 480;\n  const pad = 56;\n\n  const scaleX = (i: number, total: number) => pad + (i / Math.max(1, total - 1)) * (width - pad * 2);\n  const scaleY = (v: number, ymin: number, ymax: number, h: number) => h - pad - ((v - ymin) / Math.max(1e-9, ymax - ymin)) * (h - pad * 2);\n\n  if (!prepared) return <div className=\"text-sm text-zinc-500\">Selecione ativos para visualizar o grafico.</div>;\n\n  const h = height;\n  const hover = hoverIndex != null ? Math.min(hoverIndex, prepared.count - 1) : null;\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex items-center justify-between text-xs text-zinc-400\">\n        <div>Grafico principal</div>\n        <button\n          className=\"rounded border border-zinc-700 px-2 py-1 hover:border-zinc-500\"\n          onClick={() => setHidden({})}\n        >\n          Reset series\n        </button>\n      </div>\n\n      <div className=\"rounded-xl border border-zinc-800 p-4 md:p-5 bg-transparent\">\n        <svg\n          viewBox={`0 0 ${width} ${h}`}\n          className=\"w-full h-[360px] lg:h-[500px]\"\n          onMouseMove={(e) => {\n            const rect = (e.currentTarget as SVGSVGElement).getBoundingClientRect();\n            const localX = e.clientX - rect.left;\n            const idx = Math.round(((localX - pad) / Math.max(1, rect.width - 2 * pad)) * (prepared.count - 1));\n            setHoverIndex(Math.max(0, Math.min(prepared.count - 1, idx)));\n          }}\n          onMouseLeave={() => setHoverIndex(null)}\n        >\n          {showRegimeBands\n            ? prepared.focus.map((p, i, arr) => {\n                if (i === 0) return null;\n                const x0 = scaleX(i - 1, arr.length);\n                const x1 = scaleX(i, arr.length);\n                const regime = p.regime in regimeColors ? p.regime : \"TRANSITION\";\n                return <rect key={`band-${i}`} x={x0} y={pad} width={Math.max(1, x1 - x0)} height={h - 2 * pad} fill={regimeColors[regime]} />;\n              })\n            : null}\n\n          {Array.from({ length: 5 }).map((_, i) => {\n            const y = pad + ((h - 2 * pad) * i) / 4;\n            const v = prepared.ymax - ((prepared.ymax - prepared.ymin) * i) / 4;\n            return (\n              <g key={`y-${i}`}>\n                <line x1={pad} y1={y} x2={width - pad} y2={y} stroke=\"rgba(148,163,184,0.14)\" />\n                <text x={pad - 10} y={y + 4} textAnchor=\"end\" fill=\"#94a3b8\" fontSize=\"11\">\n                  {formatValue(v)}\n                </text>\n              </g>\n            );\n          })}\n\n          {Array.from({ length: 6 }).map((_, i) => {\n            const idx = Math.round((i / 5) * (prepared.count - 1));\n            const x = scaleX(idx, prepared.count);\n            const dt = prepared.series[0].points[idx]?.date;\n            return (\n              <g key={`x-${i}`}>\n                <line x1={x} y1={pad} x2={x} y2={h - pad} stroke=\"rgba(148,163,184,0.08)\" />\n                <text x={x} y={h - pad + 18} textAnchor=\"middle\" fill=\"#94a3b8\" fontSize=\"11\">\n                  {formatDate(dt)}\n                </text>\n              </g>\n            );\n          })}\n\n          {prepared.series.map((s, idx) => {\n            const d = s.values\n              .map((v, i) => (Number.isFinite(v) ? `${i === 0 ? \"M\" : \"L\"} ${scaleX(i, s.values.length)} ${scaleY(v, prepared.ymin, prepared.ymax, h)}` : \"\"))\n              .join(\" \");\n            return <path key={s.asset} d={d} fill=\"none\" stroke={lineColors[idx % lineColors.length]} strokeWidth=\"2.2\" />;\n          })}\n\n          {hover != null ? (\n            <line x1={scaleX(hover, prepared.count)} y1={pad} x2={scaleX(hover, prepared.count)} y2={h - pad} stroke=\"rgba(226,232,240,0.5)\" strokeDasharray=\"4 4\" />\n          ) : null}\n        </svg>\n      </div>\n\n      <div className=\"flex flex-wrap gap-2 text-xs\">\n        {prepared.series.map((s, idx) => (\n          <button\n            key={s.asset}\n            className={`rounded-full border px-2 py-1 ${hidden[s.asset] ? \"border-zinc-700 text-zinc-500\" : \"border-zinc-600 text-zinc-200\"}`}\n            onClick={() => setHidden((prev) => ({ ...prev, [s.asset]: !prev[s.asset] }))}\n          >\n            <span className=\"inline-block h-2 w-2 rounded-full mr-2\" style={{ background: lineColors[idx % lineColors.length] }} />\n            {s.asset}\n          </button>\n        ))}\n      </div>\n\n      {hover != null ? (\n        <div className=\"rounded-lg border border-zinc-800 bg-zinc-950 px-3 py-2 text-xs text-zinc-300\">\n          <div>Data: {prepared.series[0].points[hover]?.date || \"--\"}</div>\n          <div>Regime: {prepared.series[0].points[hover]?.regime || \"--\"}</div>\n          <div>Confiança: {((prepared.series[0].points[hover]?.confidence || 0) * 100).toFixed(1)}%</div>\n          <div>Qualidade: {((prepared.series[0].points[hover]?.confidence || 0) * 0.92 * 100).toFixed(1)}%</div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OC0BA,IAAM,EAAsC,CAC1C,OAAQ,SACR,WAAY,eACZ,kBAAmB,cACnB,OAAQ,UACR,OAAQ,SACR,YAAa,cACb,GAAI,SACJ,kBAAmB,oBACnB,oBAAqB,sBACrB,uBAAwB,0BACxB,WAAY,aACd,EAEe,SAAS,EAAiB,CAAY,EACnD,GAAM,QACJ,CAAM,UACN,CAAQ,CACR,kBAAgB,QAChB,CAAM,gBACN,CAAc,CACd,WAAS,CACT,mBAAiB,aACjB,CAAW,qBACX,CAAmB,CACnB,WAAS,CACT,mBAAiB,iBACjB,CAAe,yBACf,CAAuB,WACvB,CAAS,mBACT,CAAiB,CACjB,SAAO,CACR,CAAG,EAEE,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAE3B,EAAW,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KACvB,IAAM,EAAI,EAAM,IAAI,GAAG,WAAW,GAClC,OAAO,EACJ,MAAM,CAAC,AAAC,KAAO,KAAW,EAAQ,MAAM,EAAU,AAAW,CAAlB,UAA4B,AAAD,GAAG,KAAK,EAAI,EAAA,CAAE,GAAM,GAC1F,MAAM,CAAC,AAAC,GAAM,CAAC,GAAK,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAM,CAAC,EAAE,KAAK,EAAI,EAAA,CAAE,CAAE,WAAW,GAAG,QAAQ,CAAC,IAChG,KAAK,CAAC,EAAG,IACd,EAAG,CAAC,EAAQ,EAAO,EAAQ,EAAQ,EAE7B,EAAoB,CAAA,EAAA,EAAA,OAAO,AAAP,EAAQ,KAChC,IAAM,EAAM,IAAI,IAIhB,OAHA,EAAO,OAAO,CAAC,AAAC,IACV,EAAE,KAAK,EAAE,EAAI,GAAG,CAAC,EAAE,KAAK,CAC9B,GACO,CAAC,SAAU,MAAM,IAAI,CAAC,GAAK,IAAI,GAAG,AAC3C,EAAG,CAAC,EAAO,EAWX,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,mFACV,QAAS,IAAM,EAAQ,AAAC,GAAM,CAAC,GAC/B,MAAM,6BAEL,EAAS,MAAM,CAAG,CAAA,EAAG,EAAS,MAAM,CAAC,oBAAoB,CAAC,CAAG,sBAE/D,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oHACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAU,6EACV,YAAY,eACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,IAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAoB,UAAU,gFAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EAAS,QAAQ,CAAC,EAAE,KAAK,EAClC,SAAU,IAAM,KAlCf,WAkC2B,EAAE,KAAK,MAjCrD,AAAI,EAAS,QAAQ,CAAC,GACpB,EAAiB,EAAS,CADE,KACI,CAAC,AAAC,GAAM,IAAM,MAG5C,EAAS,MAAM,EAAI,EAAA,GAAI,AAC3B,EAAiB,IAAI,EAAU,EAAM,CAFrC,GA+BkB,UAAU,4BAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAe,EAAE,KAAK,GACtC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAiB,CAAW,CAAC,EAAE,KAAK,EAAI,GAAG,EAAI,EAAE,KAAK,EAAI,OARhE,EAAE,KAAK,QAavB,QAGN,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,UAAU,kEACV,MAAM,6BAEL,CAAC,GAAW,EAAQ,MAAM,CAAG,EAAU,EAAkB,GAAG,CAAC,AAAC,IAAM,AAAC,CAAE,MAAO,EAAG,MAAa,QAAN,EAAc,mBAAqB,CAAW,CAAC,EAAE,EAAI,EAAE,CAAC,CAAA,CAAE,CAAE,GAAG,CAAC,AAAC,GACxJ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAqB,MAAO,EAAE,KAAK,UACjC,EAAE,KAAK,EADG,EAAE,KAAK,KAMxB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAkB,EAAE,MAAM,CAAC,KAAK,EACjD,UAAU,4EAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,iBAAQ,WACtB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,kBAAS,eAGzB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAoB,EAAE,MAAM,CAAC,KAAK,EACnD,UAAU,4EAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,eAAM,gBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,eAAM,gBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,gBAAO,iBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,cAAK,cACnB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,eAAM,YAGtB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAkB,EAAE,MAAM,CAAC,KAAK,EACjD,UAAU,4EAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,gBAAO,qBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,qBAAY,0BAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,oBAAW,6BAG3B,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAW,CAAC,oCAAoC,EAAE,EAAY,gCAAkC,kBAAA,CAAmB,CACnH,QAAS,IAAM,EAAkB,CAAC,YAEjC,EAAY,iBAAmB,oBAGlC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAW,CAAC,oCAAoC,EAAE,EAAkB,gCAAkC,kBAAA,CAAmB,CACzH,QAAS,IAAM,EAAwB,CAAC,YAEvC,EAAkB,oBAAsB,2BAKnD,CCzKA,IAAM,EAAuC,CAC3C,OAAQ,wBACR,WAAY,wBACZ,SAAU,wBACZ,EAEM,EAAa,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAU,CAiB3G,SAAS,EAAI,CAAgB,CAAE,CAAc,EAC3C,GAAI,CAAC,EAAO,MAAM,CAAE,OAAO,EAC3B,IAAM,EAAQ,GAAK,CAAD,EAAU,CAAC,CACvB,EAAM,CAAC,CAAM,CAAC,EAAE,CAAC,CACvB,IAAK,IAAI,EAAI,EAAG,EAAI,EAAO,MAAM,CAAE,GAAK,EACtC,AADyC,EACrC,IAAI,CAAC,EAAQ,CAAM,CAAC,EAAE,CAAG,CAAC,EAAI,CAAA,CAAK,CAAI,CAAG,CAAC,EAAI,EAAE,EAEvD,OAAO,CACT,CAgBe,SAAS,EAAY,CAAY,EAC9C,GAAM,MACJ,CAAI,UACJ,EAAW,EAAE,CACb,aAAY,CAAK,iBACjB,GAAkB,CAAI,CACtB,YAAY,MAAM,aAClB,EAAc,KAAK,CACpB,CAAG,EACE,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAkC,CAAC,GACzD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAEtD,EAAW,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,KAYvB,IAAM,EAAqB,MAAM,OAAO,CAAC,GACrC,CAAE,OAXJ,AAW4B,CAAhB,CAXR,GAAG,CAAC,CAAC,EAAG,IACN,AAAJ,SAAc,EAAU,CAAP,CACV,CACL,KAAM,OAAO,EAAE,CAAC,EAAI,GACpB,MAAO,OAAO,QAAQ,CAAC,EAAE,UAAU,EAAI,EAAE,UAAU,CAAG,KACtD,WAAY,EAAE,UAAU,EAAI,EAC5B,OAAQ,EAAE,MAAM,EAAI,YACtB,EAIgC,EAChC,EAEE,EAAS,CADO,EAAS,MAAM,CAAG,EAAW,OAAO,IAAI,CAAC,EAAA,EAClC,MAAM,CAAC,AAAC,GAAM,CAAC,CAAM,CAAC,EAAE,EAAI,CAAC,CAAO,CAAC,EAAE,EAAI,EAAA,AAAE,EAAE,MAAM,EAClF,GAAI,CAAC,EAAO,MAAM,CAAE,OAAO,KAE3B,IAAI,EAAY,KAAK,GAAG,IAAI,EAAO,GAAG,CAAC,AAAC,GAAM,CAAO,CAAC,EAAE,CAAC,MAAM,GACzD,EAvCJ,AAAW,AAAf,GAuCa,IAvCS,GAAO,GACd,AAAX,OAAkB,GAAO,GACzB,AAAW,QAAQ,CAqCC,EArCM,IACF,KAAxB,AAAW,QAAA,EAqCT,CArCe,CAqCV,IAAG,EAAY,KAAK,GAAG,CAAC,EAAW,EAAA,EAY5C,IAAM,EAVU,AAKA,AAKD,EAVQ,GAAG,CAAC,AAAC,IAAM,AAAC,CACjC,MAAO,EACP,OAAQ,CAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,GAC5B,CAAC,EAEuB,GAAG,CAAC,AAAC,GAAO,CAAD,CACjC,MAAO,EAAE,KAAK,CACd,OAAQ,AAxDd,SAAuB,AAAd,CAAsB,CAAE,EAAM,GAAI,EACzC,GAAI,EAAI,MAAM,EAAI,EAAK,OAAO,EAC9B,IAAM,EAAO,KAAK,IAAI,CAAC,EAAI,MAAM,CAAG,GACpC,OAAO,EAAI,MAAM,CAAC,CAAC,EAAG,IAAQ,EAAM,GAAS,EAC/C,EAoDyB,EAAE,MAAM,CAAE,MAC/B,CAAC,EAEsB,GAAG,CAAC,AAAC,IAC1B,IAAM,EAAS,EAAE,MAAM,CAAC,GAAG,CAAC,AAAC,GAAkB,MAAX,EAAE,KAAK,CAAW,IAAM,EAAE,KAAK,EAC7D,EAAO,EAAO,IAAI,CAAC,AAAC,GAAM,OAAO,QAAQ,CAAC,KAAO,EACjD,EAAa,EAAO,GAAG,CAAC,AAAC,GAAO,OAAO,QAAQ,CAAC,GAAM,EAAI,EAAQ,IAAM,KACxE,EAAS,EAAY,EAAa,EAClC,EACU,cAAd,EAA4B,EAAI,EAAoB,GAAmB,aAAd,EAA2B,EAAI,EAAoB,IAAM,EACpH,MAAO,CACL,MAAO,EAAE,KAAK,CACd,OAAQ,EAAE,MAAM,CAChB,OAAQ,CACV,CACF,GAEM,EAAY,EAAO,OAAO,CAAC,AAAC,GAAM,EAAE,MAAM,EAAE,MAAM,CAAC,AAAC,GAAM,OAAO,QAAQ,CAAC,WAC3E,AAAL,EAAe,EAAX,IAAiB,CAKd,CALgB,AAMrB,SACA,KALW,KAAK,GAAG,IAAI,GAMvB,KALW,KAAK,GAAG,IAAI,GAMvB,MAAO,CAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAC9B,MAAO,CAAM,CAAC,EAAE,CAAC,MAAM,AACzB,EAX8B,IAYhC,EAAG,CAAC,EAAM,EAAU,EAAW,EAAW,EAAQ,EAAY,EAMxD,EAAS,CAAC,EAAW,IAAkB,GAAO,EAAI,KAAK,GAAG,CAAC,EAAG,EAAQ,GAAO,EAAD,GAGlF,GAH2F,AAGvF,CAAC,EAAU,GAHkF,CAAC,EAG5E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,gDAG7D,IAAM,EAAsB,MAAd,EAAqB,KAAK,GAAG,CAAC,EAAY,EAAS,KAAK,CAAG,GAAK,KAE9E,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,sBACL,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,iEACV,QAAS,IAAM,EAAU,CAAC,YAC3B,oBAKH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,QAAS,CAAC,IAAI,EAAE,MAAM,CAAC,CACvB,CADyB,GAAG,MAClB,gCACV,YAAa,AAAC,IACZ,IAAM,EAAQ,EAAE,aAAa,CAAmB,qBAAqB,GAE/D,EAAM,KAAK,KAAK,CAAE,CADT,AACU,EADR,OAAO,AACU,CADP,EAAK,IAAI,GACF,CAAG,CAAI,KAAK,GAAG,CAAC,EAAG,EAAK,KAAK,CAAG,IAAI,EAAS,EAAS,GAAV,EAAe,EAAG,CAAC,EACjG,EAAc,KAAK,GAAG,CAAC,EAAG,KAAK,GAAG,CAAC,EAAS,KAAK,CAAG,EAAG,IACzD,EACA,aAAc,IAAM,EAAc,gBAEjC,EACG,EAAS,KAAK,CAAC,GAAG,CAAC,CAAC,EAAG,EAAG,KACxB,GAAU,IAAN,EAAS,OAAO,KACpB,IAAM,EAAK,EAAO,EAAI,EAAG,EAAI,MAAM,EAC7B,EAAK,EAAO,EAAG,EAAI,MAAM,EACzB,EAAS,EAAE,MAAM,IAAI,EAAe,EAAE,MAAM,CAAG,aACrD,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAuB,EAAG,EAAI,EAxCxC,CAwC2C,EAAK,MAAO,KAAK,GAAG,CAAC,EAAG,EAAK,GAAK,OAAQ,IAAI,AAAS,IAAL,CAAW,CAAY,CAAC,EAAO,EAAxG,CAAC,KAAK,EAAE,EAAA,CAAG,CAC/B,GACA,KAEH,MAAM,IAAI,CAAC,CAAE,OAAQ,CAAE,GAAG,GAAG,CAAC,CAAC,EAAG,KACjC,MAAM,EAAI,GAAO,AAAC,IAAI,AAAW,EAAK,EAAZ,AACpB,EAAI,CADmB,CACV,IAAI,CAAI,CAAC,EAAS,IAAI,CAAG,EAAS,IAAI,AAAJ,EAAQ,EAAK,EAClE,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,IAAI,EAAK,GAAI,EAAG,GAAI,KAAa,GAAL,AAAS,EAAG,OAAO,2BACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAG,GAAU,EAAG,CAAP,CAAW,EAAG,WAAW,MAAM,KAAK,UAAU,SAAS,cA3JhF,CADE,AA6JW,EA7JP,KAAK,GAAG,CAAC,KACV,IAAkB,CAAA,EAAG,CAAC,AA4JF,EA5JM,CAAf,EAAe,CAAS,CAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CACvD,GAAK,IAAc,CAAA,EAAP,AAAU,CAAC,EAAI,GAAA,CAAK,CAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CAC5C,EAAE,OAAO,CAAC,OAuJG,CAAC,EAAE,EAAE,EAAA,CAAG,CAOpB,GAEC,MAAM,IAAI,CAAC,CAAE,OAAQ,CAAE,GAAG,GAAG,CAAC,CAAC,EAAG,KACjC,IAAM,EAAM,KAAK,KAAK,CAAE,EAAI,GAAM,CAAD,CAAU,KAAK,EAAG,CAAC,EAC9C,EAAI,EAAO,EAAK,EAAS,KAAK,EAC9B,EAAK,EAAS,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAI,EAAE,KAC3C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAI,EAAG,IAAI,EAAK,GAAI,EAAG,GAAI,IAAI,AAAK,OAAO,2BACjD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAG,EAAG,EAAG,IAAI,AAAU,MAAJ,KAAe,SAAS,KAAK,UAAU,SAAS,cAnLzF,AAoLmB,SApLV,AAAW,CAAS,EAC3B,GAAI,CAAC,EAAG,MAAO,GACf,IAAM,EAAI,IAAI,KAAK,CAAA,EAAG,EAAE,UAAU,CAAC,EAC7B,EAAK,OAAO,EAAE,WAAW,GAAK,GAAG,QAAQ,CAAC,EAAG,KAC7C,EAAK,OAAO,EAAE,cAAc,IAAI,KAAK,CAAC,CAAC,GAC7C,MAAO,CAAA,EAAG,EAAG,CAAC,EAAE,EAAA,CAClB,AADsB,EA+KQ,OAHR,CAAC,EAAE,EAAE,EAAA,CAAG,CAOpB,GAEC,EAAS,MAAM,CAAC,GAAG,CAAC,CAAC,EAAG,KACvB,IAAM,EAAI,EAAE,MAAM,CACf,GAAG,CAAC,CAAC,EAAG,oBAAO,OAAO,QAAQ,CAAC,GAAK,CAAA,EAAS,IAAN,EAAU,IAAM,IAAI,CAAC,EAAE,EAAO,EAAG,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,EAtE5E,AAsE8E,EAAU,EAAS,IAAI,CAtEvF,EAsEyF,EAAS,EAtEpF,EAsEwF,CAtE1E,CAsE4E,GAtExE,AAAO,CAsEgC,AAtE/B,EAAI,CAAA,CAAI,CAAI,KAAK,GAAG,CAAC,KAAM,EAAO,GAAU,IAAI,AAsEgB,CAtErB,AAsEyB,CAAG,IAtEjB,CAAC,AAuE3H,IAAI,CAAC,KACR,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAmB,EAAG,EAAG,KAAK,OAAO,OAAQ,CAAU,CAAC,EAAM,EAAW,MAAM,CAAC,CAAE,YAAY,OAApF,EAAE,KAAK,CAC3B,GAEU,MAAT,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAI,EAAO,EAAO,EAAS,KAAK,EAAG,IAAI,EAAK,GAAI,EAAO,EAAO,EAAS,KAAK,EAAG,GAAI,IAAI,AAAK,OAAO,wBAAwB,gBAAgB,QAC/I,UAIR,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACZ,EAAS,MAAM,CAAC,GAAG,CAAC,CAAC,EAAG,IACvB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,UAAW,CAAC,8BAA8B,EAAE,CAAM,CAAC,EAAE,KAAK,CAAC,CAAG,gCAAkC,gCAAA,CAAiC,CACjI,QAAS,IAAM,EAAU,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAE,KAAK,CAAC,CAAE,CAAC,CAAI,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,YAE1E,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAyC,MAAO,CAAE,WAAY,CAAU,CAAC,EAAM,EAAW,MAAM,CAAC,AAAC,IACjH,EAAE,KAAK,GALH,EAAE,KAAK,KAUR,MAAT,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0FACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,SAAO,EAAS,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAM,EAAE,MAAQ,QACtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,WAAS,EAAS,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAM,EAAE,QAAU,QAC1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,cAAY,CAAC,AAAsD,KAArD,EAAS,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAM,EAAE,aAAc,CAAC,AAAI,CAAG,CAAE,OAAO,CAAC,GAAG,OACxF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,cAAY,CAAC,AAAsD,KAArD,EAAS,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAM,EAAE,aAAc,CAAC,CAAW,GAAA,CAAG,CAAE,OAAO,CAAC,GAAG,UAE/F,OAGV,CFzNA,IAAM,EAAsC,CAC1C,OAAQ,mBACR,WAAY,iBACZ,SAAU,gBACV,aAAc,eAChB,EAEM,EAAsC,CAC1C,OAAQ,SACR,WAAY,eACZ,kBAAmB,cACnB,OAAQ,UACR,OAAQ,SACR,YAAa,cACb,GAAI,SACJ,kBAAmB,oBACnB,oBAAqB,sBACrB,uBAAwB,0BACxB,WAAY,aACd,EAEA,SAAS,EAAY,CAAc,SACjC,AAAK,EACS,EADV,GAAQ,IACW,CAAnB,EAA0B,WAChB,WAAV,GAAgC,eAAV,GAAoC,aAAV,GAAkC,gBAAgB,CAA1B,EAAiC,EACtG,aAHY,YAIrB,CAOe,SAAS,EAAgB,OACtC,CAAK,WACL,GAAY,CAAI,CAChB,gBAAgB,SAAS,CAK1B,EACC,GAAM,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,SACrC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,GAC/B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAyC,aAC7E,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACnD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,QACzC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAoC,QACxE,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,GAE3D,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,EAAE,EACtD,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EAC/C,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgC,CAAC,GAC7E,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAuD,CAAC,GACxG,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA6D,MAC7F,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiC,MACvE,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgC,MAEtF,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KA6CR,CA5CqB,UACnB,IAAM,EAAW,AAAc,mBAAiB,eAAiB,kBAC3D,EAAsB,GAAkC,iBAAd,EAA+B,EAAI,EAC7E,CAAC,EAAQ,EAAS,EAAU,CAAG,MAAM,QAAQ,GAAG,CAAC,CACrD,MAAM,mBACN,MAAM,mBACN,MACE,CAAC,mBAAmB,EAAE,mBAAmB,GAAQ,QAAQ,EAAE,mBACzD,GACA,sBAAsB,EAAE,EAAA,CAAqB,EAElD,EAED,GAAI,EAAO,EAAE,CAAE,CACb,IAAM,EAAU,MAAM,EAAO,IAAI,GACjC,EAAW,CAAE,OAAQ,GAAS,OAAQ,sBAAuB,GAAS,qBAAsB,GAC5F,EAAe,GAAS,SAAuC,KACjE,MACE,CADK,CACM,MACX,EAAc,MAGhB,GAAI,EAAQ,EAAE,CAAE,CACd,IAAM,EAAW,MAAM,EAAQ,IAAI,GACnC,EAAoB,GAAU,QAAqC,KACrE,MACE,CADK,CACc,MAGrB,IAAM,EAAa,MAAM,EAAU,IAAI,GACjC,EAAO,GAAY,QACzB,GAAI,CAAC,MAAM,OAAO,CAAC,GAAO,CACxB,EAAY,EAAE,EACd,EAAY,EAAE,EACd,MACF,CACA,EAAY,GACZ,EAAY,AAAC,IACX,IAAM,EAAW,EAAK,MAAM,CAAC,AAAC,GAAqB,AAAyC,eAAxC,EAAE,iBAAiB,EAAI,WAAA,CAAW,EAChF,EAAY,EAAS,MAAM,CAAG,EAAW,EACzC,EAAQ,EAAK,MAAM,CAAC,AAAC,GAAM,EAAU,IAAI,CAAC,AAAC,GAAqB,EAAE,KAAK,GAAK,IAClF,OAAO,EAAM,MAAM,CAAG,EAAQ,EAAU,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GAAqB,EAAE,KAAK,CACvF,GACF,GAEF,EAAG,CAAC,EAAW,EAAQ,EAAW,EAAiB,EAEnD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,EAAS,MAAM,CAAE,OACtB,IAAM,EAAS,EAAS,GAAG,CAAE,AAAD,GAAO,EAAE,KAAK,EAC1C,EAAY,AAAC,IACX,IAAM,EAAO,EAAK,MAAM,CAAC,AAAC,GAAM,EAAO,QAAQ,CAAC,WAChD,AAAI,EAAK,MAAM,CAAS,CAAP,CACV,EAAO,KAAK,CAAC,EAAG,EACzB,EACF,EAAG,CAAC,EAAS,EAEb,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KA2CR,CA1CmB,UACjB,GAAI,CAAC,EAAS,MAAM,CAAE,OACpB,EAAiB,CAAC,GAGpB,GAAW,GACX,GAAI,CACF,IAAM,EAAY,MAAM,MAAM,CAAC,+BAA+B,EAAE,EAAS,IAAI,CAAC,KAAK,IAAI,EAAE,EAAU,WAAW,CAAC,EACzG,EAAa,MAAM,EAAU,IAAI,GACvC,EAAiB,GAAc,CAAC,GAEhC,IAAM,EAAkE,CAAC,CACzE,OAAM,QAAQ,GAAG,CACf,EAAS,GAAG,CAAC,MAAO,IAClB,CAAS,CAAC,EAAM,CAAG,CAAE,EAAG,KAAM,EAAG,KAAM,GAAI,IAAK,EAChD,GAAI,CACF,MAAM,QAAQ,GAAG,CACf,CAAC,EAAG,EAAG,GAAG,CAAC,GAAG,CAAC,MAAO,IACpB,GAAI,CACF,IAAM,EAAI,MAAM,MAAM,CAAC,0BAA0B,EAAE,EAAM,CAAC,EAAE,EAAU,CAAC,EAAE,EAAM,CAAC,EAAE,EAAU,aAAa,EAAE,EAAE,KAAK,CAAC,EACnH,GAAI,CAAC,EAAE,EAAE,CAAE,CACT,CAAS,CAAC,EAAM,CAAC,EAAE,CAAG,KACtB,MACF,CACA,IAAM,EAAI,MAAM,EAAE,IAAI,GAChB,EAAQ,MAAM,OAAO,CAAC,GAAG,aAAe,EAAE,WAAW,CAAG,EAAE,CAChE,CAAS,CAAC,EAAM,CAAC,EAAE,CAAG,EAAM,MAAM,CAAG,CAAK,CAAC,EAAM,MAAM,CAAG,EAAE,CAAG,IACjE,CAAE,KAAM,CACN,CAAS,CAAC,EAAM,CAAC,EAAE,CAAG,IACxB,CACF,GAEJ,CAAE,KAAM,CACN,CAAS,CAAC,EAAM,CAAG,CAAE,EAAG,KAAM,EAAG,KAAM,GAAI,IAAK,CAClD,CACF,IAEF,EAAmB,EACrB,QAAU,CACR,GAAW,EACb,EACF,GAEF,EAAG,CAAC,EAAU,EAAU,EAExB,IAAM,EAAU,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,WACtB,IAKQ,EALF,EAAe,EAAS,OAAO,CAAC,AAAC,GAAM,CAAa,CAAC,EAAE,EAAI,EAAE,EAC7D,EAAa,EAAS,GAAG,CAAC,AAAC,GAAM,CAAC,CAAa,CAAC,EAAE,EAAI,EAAA,AAAE,CAAC,CAAC,KAAK,GAAG,CAAC,EAAG,CAAC,CAAa,CAAC,EAAE,EAAI,EAAA,AAAE,EAAE,MAAM,CAAG,GAAG,EAAE,MAAM,CAAC,SACpH,EA3IR,AAAK,CADO,EA4IW,CA3InB,CADsB,AA4IQ,GAAhB,AAAmB,CAAC,AAAC,GAAM,EAAE,UAAU,EAAI,IA3InD,MAAM,CACT,CADW,CACN,MAAM,CAAC,CAAC,EAAG,IAAM,EAAI,EAAG,GAAK,EAAK,MAAM,CAD3B,EA4IjB,EAAgB,EAAW,MAAM,CAAE,AAAD,GAAO,AAA0B,eAAd,EAAE,MAAM,GAAkB,MAAM,CAS3F,MAAO,CACL,KAAA,EAAO,EARgC,CAAC,EACxC,EAAW,OAAO,CAAC,AAAC,IAClB,IAAM,EAAI,EAAY,EAAE,MAAM,EAC9B,CAAM,CAAC,EAAE,CAAG,CAAC,CAAM,CAAC,EAAE,EAAI,CAAC,EAAI,CACjC,GACO,OAAO,OAAO,CAAC,GAAQ,IAAI,CAAC,CAAC,EAAG,IAAM,CAAC,CAAC,EAAE,CAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,EAAI,cAIrE,WAAY,EACZ,QAAS,KAAK,GAAG,CAAC,EAAG,KAAK,GAAG,CAAC,EAAG,AAAU,OAC3C,OAAQ,EACR,WAAY,EAAa,MAAM,AACjC,CACF,EAAG,CAAC,EAAU,EAAc,EAEtB,EAAY,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IACjB,EAAS,GAAG,CAAC,AAAC,IACnB,IAAM,EAAS,CAAa,CAAC,EAAM,EAAI,EAAE,CACnC,EAAO,CAAM,CAAC,EAAO,MAAM,CAAG,EAAE,CAChC,EAAQ,CAAM,CAAC,EAAE,CACjB,EAAO,GAAM,YAAc,EAC3B,EAAS,EAAY,GAAM,QAC3B,EAAU,EAAS,IAAI,CAAC,AAAC,GAAM,EAAE,KAAK,GAAK,GAC3C,EAAU,GAAS,mBAAqB,GAAS,eAAiB,YAClE,EAAU,GAAS,QAAU,GAC7B,EAAM,CAAe,CAAC,EAAM,EAAE,CAAC,EAAe,EAAE,OAChD,EAAgB,EAAO,MAAM,CAAG,EAClC,EAAS,EACb,IAAK,IAAI,EAAI,EAAe,GAAK,EAAG,GAAK,EACvC,AAD0C,GACtC,EAAY,CAAM,CAAC,EAAE,EAAE,UAAY,EAAQ,GAAU,OACpD,MAEP,IAAM,EAAmC,WAAd,EAAkC,EAAT,EAAa,EAC7D,EAAS,WAIb,MAHe,WAAX,GAAuB,GAAQ,KAAK,EAAS,SAAA,GAClC,aAAX,GAAyB,EAAO,GAAA,IAAM,EAAS,YAAA,EACnC,cAAZ,IAAyB,EAAS,0BAAA,EAC/B,OACL,EACA,MAAO,CAAW,CAAC,GAAS,OAAS,GAAG,EAAI,GAAS,OAAS,GAC9D,OAAoB,cAAZ,EAA0B,eAAiB,EACnD,WAAY,EACZ,QAAS,GAAS,SAAW,GAAS,SAAS,QAC/C,OAAQ,GAAS,EAAO,CAAA,EAAG,EAAM,IAAI,CAAC,IAAI,EAAE,EAAK,IAAI,CAAA,CAAE,CAAG,wBAC1D,EACA,MAAO,GAAM,MACb,SAAU,SACV,EACA,iBAAkB,EAClB,iBAAkB,CACpB,CACF,GACC,CAAC,EAAU,EAAe,EAAiB,EAAU,EAAgB,EAAU,EAElF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4DAAoD,IACnE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kCAAyB,6CACvC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,wEACpC,GAAS,uBAAiF,SAAxD,OAAO,EAAQ,qBAAqB,EAAE,WAAW,GAClF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FAAsF,6CAGnG,KACH,GAAe,GAAY,iBAAyD,WAAY,EAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kGAAyF,iEAGtG,KACJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uDACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,QAAM,GAAS,QAAU,QAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,cAAY,GAAiB,WAAa,QAChD,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,UAAQ,GAAiB,OAAS,QACxC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,kBAAgB,GAAiB,cAAgB,WAEzD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDACX,CAAC,YAAa,QAAS,eAAe,CAAW,GAAG,CAAC,AAAC,GACtD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAa,GAC5B,UAAW,CAAC,4BAA4B,EACtC,IAAc,EAAI,gCAAkC,gCAAA,CACpD,UAED,GANI,IAST,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,8DACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EACT,SAAU,AAAC,GAAM,EAAoB,EAAE,MAAM,CAAC,OAAO,EACrD,UAAU,4BACV,iCAMR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,MAAM,SAAS,MAAO,EAAQ,KAAK,CAAE,KAAM,EAAQ,KAAK,GAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,MAAM,YAAY,MAAO,CAAA,EAAG,CAAsB,IAArB,EAAQ,UAAU,AAAG,CAAG,CAAE,OAAO,CAAC,GAAG,CAAC,CAAC,GAC1E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,MAAM,YAAY,MAAO,CAAA,EAAG,CAAmB,IAAlB,EAAQ,OAAO,AAAG,CAAG,CAAE,OAAO,CAAC,GAAG,CAAC,CAAC,GACvE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,MAAM,UAAU,MAAO,OAAO,EAAQ,MAAM,OAGpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mFACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,OAAQ,EACR,SAAU,EACV,iBAAkB,EAClB,OAAQ,EACR,eAAgB,AAAC,GAAkB,EAAU,GAC7C,QAAS,CACP,CAAE,MAAO,UAAW,MAAO,mBAAoB,EAC/C,CAAE,MAAO,SAAU,MAAO,mBAAoB,EAC9C,CAAE,MAAO,aAAc,MAAO,aAAc,EAC7C,CACD,UAAW,EACX,kBAAmB,EACnB,YAAa,EACb,oBAAqB,EACrB,UAAW,EACX,kBAAmB,EACnB,gBAAiB,EACjB,wBAAyB,EACzB,UAAW,EACX,kBAAmB,IAGpB,EAAU,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,yBAA6B,KAE/E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,EACN,SAAU,EACV,UAAW,EACX,gBAAiB,EACjB,UAAW,EACX,YAAa,OAIhB,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DAAkD,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,2BACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mCACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,UAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,UAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,YAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,WAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,YAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,UAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,UAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,UAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,2BAAiB,UAAQ,KACvC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAiB,cAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACE,EAAU,GAAG,CAAC,AAAC,GACd,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAiB,UAAU,sDAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAQ,EAAE,KAAK,GAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAsB,EAAE,KAAK,EAAI,MAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAsB,EAAE,MAAM,GAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAC,KAAK,EAAE,CAAW,CAAC,EAAE,MAAM,CAAC,EAAI,gBAAA,CAAiB,UAAG,EAAE,MAAM,GAC5E,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,EAAE,kBAAkB,CAAC,OACzD,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,iBAAQ,CAAC,AAAe,MAAb,UAAU,AAAG,CAAG,CAAE,OAAO,CAAC,GAAG,OACtD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAqB,MAAb,EAAE,OAAO,CAAW,CAAA,EAAG,CAAa,IAAZ,EAAE,OAAO,AAAG,CAAG,CAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CAAG,OAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAmB,MAAX,EAAE,KAAK,CAAW,EAAE,KAAK,CAAC,OAAO,CAAC,GAAK,OAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gBAAsB,MAAd,EAAE,QAAQ,CAAW,CAAA,EAAG,CAAc,IAAb,EAAE,QAAQ,AAAG,CAAG,CAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CAAG,OACjF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,OAAO,MAAO,EAAE,gBAAgB,EAAI,YAAK,EAAE,MAAM,KAVxD,EAAE,KAAK,aAkB1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mFACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DAAkD,WACjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,eAC/B,CAAC,EAAG,EAAG,GAAG,CAAC,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,UAAW,CAAC,4BAA4B,EAAE,IAAmB,EAAI,gCAAkC,gCAAA,CAAiC,CACpI,QAAS,IAAM,EAAkB,aAClC,IACG,IAJG,OAQX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCAAwB,sBAAoB,EAAQ,UAAU,IAC7E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCAAwB,wBAAsB,EAAS,MAAM,IAC5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCAAwB,qBAAmB,EAAQ,KAAK,IACvE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCAAwB,oBAAkB,CAAsB,IAArB,EAAQ,UAAa,AAAH,CAAM,CAAE,OAAO,CAAC,GAAG,OAC9F,EAAU,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAkB,UAAU,0DAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA6B,EAAE,KAAK,GACnD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAiB,EAAE,MAAM,GACxC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACZ,EAAE,MAAM,CAAC,SAAO,EAAE,kBAAkB,CAAC,QAAM,EAAe,KAAG,AAAc,QAAZ,QAAQ,CAAW,CAAA,EAAG,CAAc,IAAb,EAAE,QAAQ,AAAG,CAAG,CAAE,OAAO,CAAC,GAAG,CAAC,CAAC,CAAG,UAJnH,EAAE,KAAK,SAUrB,OAGV,CAEA,SAAS,EAAK,OAAE,CAAK,OAAE,CAAK,MAAE,CAAI,CAAmD,EAEnF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEAAwD,IACvE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,sCAAsC,EAJpC,AAIsC,WAJ/C,EAAoB,mBAA8B,aAAT,EAAsB,gBAA2B,eAAT,EAAwB,iBAAmB,gBAI7E,CAAO,UAAG,MAGzE"}